!function(){"use strict";var e={243:function(e,t,s){e.exports=s.p+"d3edfb3fe0284e46cb86.jpg"},769:function(e,t,s){e.exports=s.p+"05f1a4a8dccb609a7ff3.jpg"},199:function(e,t,s){e.exports=s.p+"4317d98e0be2323014f4.jpg"},408:function(e,t,s){e.exports=s.p+"c699805af844af80a2db.jpg"},462:function(e,t,s){e.exports=s.p+"0bbb8e918e3becd29120.jpg"},329:function(e,t,s){e.exports=s.p+"205114d203f083e3e22b.jpg"}},t={};function s(r){var n=t[r];if(void 0!==n)return n.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,s),i.exports}s.p="",function(){class e{constructor(e,t){this._config=e,this._formElement=t}enableValidation(){this.setEventListeners()}setEventListeners(){this._inputs=this._formElement.querySelectorAll(this._config.inputSelector),this._submitBtn=this._formElement.querySelector(this._config.submitButtonSelector),this._inputs.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e,this._formElement),this._updateSubmitButton()}))}))}_updateSubmitButton(){const e=this._checkFieldsValidity(this._inputs);this._setSubmitButtonState(e)}_setSubmitButtonState(e){this._submitBtn.disabled=e}_checkFieldsValidity(){return Array.from(this._inputs).some((e=>!e.validity.valid))}_checkInputValidity(e){e.validity.valid?(this._removeErrorStyles(e),this._hideErrorMessage(e)):(this._addErrorStyles(e),this._showErrorMessage(e))}_removeErrorStyles(e){e.classList.remove(this._config.inputHasError)}_hideErrorMessage(e){this._formElement.querySelector(".".concat(e.id,"-error")).classList.remove(this._config.errorTextVisible)}_addErrorStyles(e){e.classList.add(this._config.inputHasError)}_showErrorMessage(e){const t=this._formElement.querySelector(".".concat(e.id,"-error"));t.textContent=e.validationMessage,t.classList.add(this._config.errorTextVisible)}resetValidation(){this._updateSubmitButton(),this._inputs.forEach((e=>{this._hideErrorMessage(e),this._removeErrorStyles(e)}))}}class t{constructor(e,t){let{data:s,handleCardClick:r,handleTrashClick:n,handleLikeClick:i,currentId:o}=e;this._template=document.querySelector("#".concat(t)),this._data=s,this._handleCardClick=r,this._handleTrashClick=n,this._handleLikeClick=i,this._currentId=o}createCard(){return this._card=this._template.content.cloneNode(!0).querySelector(".element"),this._titleElement=this._card.querySelector(".element__title"),this._imgElement=this._card.querySelector(".element__image"),this._trashButton=this._card.querySelector(".delete-button"),this._likesCounter=this._card.querySelector(".like-button__counter"),this._likeButton=this._card.querySelector(".like-button"),this._ownerId=this._data.owner._id,this._currentId!==this._ownerId&&this._trashButton.classList.add("delete-button_hidden"),this.setLikesInfo(this._data.likes),this._imgElement.src=this._data.link,this._imgElement.alt=this._data.name,this._titleElement.textContent=this._data.name,this._setEventListeners(),this._card}setLikesInfo(e){this._likes=e,this._updateLikeCount()}_updateLikeCount(){this._likesCounter.textContent=this._likes.length;const e=this._likes.some((e=>e._id===this._currentId));this._likeButton.classList.toggle("like-button_active",e)}_setEventListeners(){this._imgElement.addEventListener("click",(e=>{this._handleCardClick(e)})),this._trashButton.addEventListener("click",(()=>{this._currentId===this._ownerId&&(this._trashButton.classList.remove("delete-button_hidden"),this._handleTrashClick())})),this._likeButton.addEventListener("click",(()=>{this._handleLikeClick()}))}deleteCard(){this._card.remove()}isLiked(){const e=this._likeButton.classList.contains("like-button_active");return!0!==e&&(!1===e||void 0)}}class r{constructor(e){this._popupElement=document.querySelector("#".concat(e)),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("popup-form_open"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("popup-form_open"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{(e.target===this._popupElement||e.target.classList.contains("close-button"))&&this.close()}))}}class n extends r{constructor(e){let{popupSelector:t,handleFormSubmit:s}=e;super(t),this._form=this._popupElement.querySelector(".popup-form__input-container"),this._formInputs=this._popupElement.querySelectorAll(".popup-form__input"),this._handleFormSubmit=s}_getInputValues(){return this._formValues={},this._formInputs.forEach((e=>{this._formValues[e.name]=e.value})),this._formValues}setEventListeners(){super.setEventListeners(),this._popupElement.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}close(){super.close(),this._form.reset()}}s(199),s(769),s(462),s(243),s(408),s(329);const i={formSelector:".popup-form__input-container",inputSelector:".popup-form__input",submitButtonSelector:".submit-button",inactiveButtonClass:"popup-form__submit-button_type_disabled",errorTextSelector:".popup-form__error-text",inputHasError:"popup-form__input_has_error",errorTextVisible:"popup-form__error-text_visible"};function o(e,t){e.textContent=!0===t?"Saving...":"Save"}const a=document.querySelector("#edit-button"),c=document.querySelector(".add-button"),l=document.querySelector("#edit-pic-button"),d=document.querySelector("#create-button"),h=document.querySelector("#edit-submit"),u=document.querySelector("#profile-pic-button"),p=document.querySelector("#name"),_=document.querySelector("#about"),m=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_handleServerResponse(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}getAppInfo(){return Promise.all([this.getUserInfo(),this.getInitialCardList()])}getUserInfo(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then(this._handleServerResponse)}setUserInfo(e){let{name:t,about:s}=e;return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:s})}).then(this._handleServerResponse)}updateProfilePicture(e){let{avatar:t}=e;return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})}).then(this._handleServerResponse)}getInitialCardList(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then(this._handleServerResponse)}addCard(e){let{name:t,link:s}=e;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})}).then(this._handleServerResponse)}removeCard(e){let{_id:t}=e;return fetch("".concat(this._baseUrl,"/cards/").concat(t),{method:"DELETE",headers:this._headers}).then(this._handleServerResponse)}toggleLikeCardStatus(e,t){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:t?"PUT":"DELETE",headers:this._headers}).then(this._handleServerResponse)}}({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"9b991f86-368d-4ef3-963c-b91580821c46","Content-Type":"application/json"}});let f=null;const E=new class{constructor(e){this._container=document.querySelector(".".concat(e))}addItem(e){this._container.prepend(e)}}("elements");m.getAppInfo().then((e=>{let[t,s]=e;f=t._id,b.setUserInfo(t),s.reverse(),s.forEach((e=>{E.addItem(S(e))}))})).catch((e=>{console.log("An error occurred getting user info and adding the initial cards: ".concat(e))}));const S=e=>{const s=new t({currentId:f,data:e,handleCardClick:()=>{v.open({url:e.link,title:e.name})},handleTrashClick:()=>{y.open((()=>{m.removeCard({_id:e._id}).then((()=>{s.deleteCard(),y.close()})).catch((e=>{console.log("There was an issue deleting this card: ".concat(e))}))}))},handleLikeClick:()=>{m.toggleLikeCardStatus(e._id,s.isLiked()).then((e=>{s.setLikesInfo(e.likes)})).catch((e=>{console.log("There was an issue liking this card: ".concat(e))}))}},"card-template");return s.createCard()},v=new class extends r{open(e){let{url:t,title:s}=e;this._popupElement.querySelector(".popup-form__caption").textContent=s,this._imgElement=this._popupElement.querySelector(".popup-form__image"),this._imgElement.src=t,this._imgElement.alt=s,super.open()}}("image-popup"),b=new class{constructor(e){let{nameSelector:t,descriptionSelector:s,avatarSelector:r}=e;this._nameElement=document.querySelector(".".concat(t)),this._descriptionElement=document.querySelector(".".concat(s)),this._avatarElement=document.querySelector(".".concat(r))}getUserInfo(){return{name:this._nameElement.textContent,about:this._descriptionElement.textContent,_id:this._userId,avatar:this._avatarElement.src}}setUserInfo(e){let{name:t,about:s,_id:r,avatar:n}=e;t&&(this._nameElement.textContent=t),s&&(this._descriptionElement.textContent=s),r&&(this._id=r),n&&(this._avatarElement.src=n)}}({nameSelector:"profile__name",descriptionSelector:"profile__description",avatarSelector:"profile__image"}),g=new n({popupSelector:"edit-popup-form",handleFormSubmit:e=>{o(h,!0),m.setUserInfo(e).then((e=>{b.setUserInfo(e),g.close()})).catch((e=>{console.log("An error occurred updating user information: ".concat(e))})).finally((()=>{o(h,!1)}))}}),k=new n({popupSelector:"create-popup-form",handleFormSubmit:e=>{o(d,!0),m.addCard(e).then((e=>{E.addItem(S(e)),k.close()})).catch((e=>{console.log("An error had occurred while adding your card :( : ".concat(e))})).finally((()=>{o(d,!1)}))}}),y=new class extends r{constructor(e){let{popupSelector:t}=e;super(t),this._handleDeleteCard=this._handleDeleteCard}open(e){super.open(),this.deleteCard=e}setEventListeners(){super.setEventListeners(),this._popupElement.querySelector("#confirmation-button").addEventListener("click",(()=>{this.deleteCard()}))}}({popupSelector:"delete-confirmation-popup",handleDeleteCard:()=>{}}),C=new n({popupSelector:"profile-picture-popup",handleFormSubmit:e=>{o(u,!0),m.updateProfilePicture({avatar:e.url,_id:e._id}).then((e=>{b.setUserInfo(e),C.close()})).catch((e=>{console.log("An error had occurred updating profile picture: ".concat(e))})).finally((()=>{o(u,!1)}))}}),L=new e(i,document.querySelector("#edit-popup-form"));L.enableValidation();const I=new e(i,document.querySelector("#create-popup-form"));I.enableValidation();const q=new e(i,document.querySelector("#profile-picture-popup"));q.enableValidation(),a.addEventListener("click",(()=>{g.open();const{name:e,about:t}=b.getUserInfo();p.value=e,_.value=t,L.resetValidation()})),c.addEventListener("click",(()=>{I.resetValidation(),k.open()})),l.addEventListener("click",(()=>{q.resetValidation(),C.open()})),v.setEventListeners(),g.setEventListeners(),k.setEventListeners(),y.setEventListeners(),C.setEventListeners()}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RXpCa0wsRUFBb0J4TCxtQkFFcEIsTUFBTXlMLEVBQXNCLElBQUloTSxFQUM5QjhHLEVBQ0ExRCxTQUFTdkMsY0FBYywyQkFFekJtTCxFQUFvQnpMLG1CQUVwQjhHLEVBQWtCcEcsaUJBQWlCLFNBQVMsS0FDMUN1SyxFQUFxQjVGLE9BQ3JCLE1BQU0sS0FBRWpCLEVBQUYsTUFBUXFFLEdBQVVxQixFQUFTMUIsY0FDakNoQixFQUFVakIsTUFBUS9CLEVBQ2xCaUQsRUFBU2xCLE1BQVFzQyxFQUNqQjhDLEVBQXFCbkoscUJBR3ZCMkUsRUFBY3JHLGlCQUFpQixTQUFTLEtBQ3RDOEssRUFBb0JwSixrQkFDcEIrSSxFQUFvQjlGLFVBR3RCMkIsRUFBcUJ0RyxpQkFBaUIsU0FBUyxLQUM3QytLLEVBQW9Cckosa0JBQ3BCa0osRUFBb0JqRyxVQUd0QmdGLEVBQVdwSyxvQkFDWGdMLEVBQXFCaEwsb0JBQ3JCa0wsRUFBb0JsTCxvQkFDcEJ1SyxFQUF1QnZLLG9CQUN2QnFMLEVBQW9Cckwsb0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvdXRpbHMvQ29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvcGFnZS9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aERlbGV0ZUNvbmZpcm0uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7IiwiLy8gRm9ybSBWYWxpZGF0aW9uIGNsYXNzIGNvZGVcblxuLy8gXCJjb25maWdcIiA9IGFycmF5IG9mIHNlbGVjdG9ycyAmIFwiZm9ybUVsZW1lbnRcIiA9IGZvcm1cbmV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICAvLyBhZGQgZXZlbnQgbGlzdGVuZXIgZnVuY3Rpb246IGl0IHdpbGwgdXNlIHBhcmFtZXRlcnMgZm9ybSBhbmQgc2V0dGluZ3MuXG4gIC8vIHNlbGVjdCBhbGwgb2YgdGhlIGlucHV0c1xuICAvLy8gd2FudCB0byBzZWxlY3Qgc3VibWl0IGJ1dHRvbiBpbiB0aHMgZnggdG9vXG4gIC8vLyBhZGQgYSBwYXJ0IHRoYXQgaGFzIGEgY29uZGl0aW9uIHdoZXJlIHRoZXJlIGlzIGFuIGVycm9yIGFuZCB3aGF0IHRvIGRvIHRoZW5cbiAgLy8vIGFkZCBidXR0b24gZGlzYWJsZSB0b2dnbGVcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5faW5wdXRzID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcbiAgICAgIHRoaXMuX2NvbmZpZy5pbnB1dFNlbGVjdG9yXG4gICAgKTtcbiAgICB0aGlzLl9zdWJtaXRCdG4gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgdGhpcy5fY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yXG4gICAgKTtcbiAgICAvL2NoZWNrcyBpbiBwdXQgdmFsaWRpdHkgJiBjaGVjayBhbGwgaW5wdXRzIGZvciB2YWxpZGl0eVxuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChldnQpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0LCB0aGlzLl9mb3JtRWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3VwZGF0ZVN1Ym1pdEJ1dHRvbigpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBfdXBkYXRlU3VibWl0QnV0dG9uKCkge1xuICAgIGNvbnN0IGhhc0Vycm9ycyA9IHRoaXMuX2NoZWNrRmllbGRzVmFsaWRpdHkodGhpcy5faW5wdXRzKTtcbiAgICB0aGlzLl9zZXRTdWJtaXRCdXR0b25TdGF0ZShoYXNFcnJvcnMpO1xuICB9XG5cbiAgLy8gdG9nZ2xlcyB0aGUgYnV0dG9uIGJldHdlZW4gZGlzYWJsZWQgYW5kIGVuYWJsZWRcbiAgX3NldFN1Ym1pdEJ1dHRvblN0YXRlKGhhc0Vycm9ycykge1xuICAgIHRoaXMuX3N1Ym1pdEJ0bi5kaXNhYmxlZCA9IGhhc0Vycm9ycztcbiAgfVxuXG4gIC8vIHR1cm4gaW5wdXRzIGludG8gYW4gYXJyYXksIHRha2Ugc29tZSBpbnB1dDsgcmV0dXJuIHNvbHV0aW9uIGlmIGlucHV0IGlzIGludmFsaWRcbiAgX2NoZWNrRmllbGRzVmFsaWRpdHkoKSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5faW5wdXRzKS5zb21lKChpbnB1dCkgPT4gIWlucHV0LnZhbGlkaXR5LnZhbGlkKTtcbiAgfVxuXG4gIC8vIHJlbW92ZXMvaGlkZXMgZXJyb3JzIGlmIGlucHV0cyBhcmUgdmFsaWRcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dCkge1xuICAgIGlmIChpbnB1dC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fcmVtb3ZlRXJyb3JTdHlsZXMoaW5wdXQpO1xuICAgICAgdGhpcy5faGlkZUVycm9yTWVzc2FnZShpbnB1dCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2FkZEVycm9yU3R5bGVzKGlucHV0KTtcbiAgICAgIHRoaXMuX3Nob3dFcnJvck1lc3NhZ2UoaW5wdXQpO1xuICAgIH1cbiAgfVxuXG4gIF9yZW1vdmVFcnJvclN0eWxlcyhpbnB1dCkge1xuICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmlucHV0SGFzRXJyb3IpO1xuICB9XG5cbiAgX2hpZGVFcnJvck1lc3NhZ2UoaW5wdXQpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAuJHtpbnB1dC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmVycm9yVGV4dFZpc2libGUpO1xuICB9XG5cbiAgX2FkZEVycm9yU3R5bGVzKGlucHV0KSB7XG4gICAgaW5wdXQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuaW5wdXRIYXNFcnJvcik7XG4gIH1cblxuICBfc2hvd0Vycm9yTWVzc2FnZShpbnB1dCkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYC4ke2lucHV0LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmVycm9yVGV4dFZpc2libGUpO1xuICB9XG5cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX3VwZGF0ZVN1Ym1pdEJ1dHRvbigpO1xuXG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICB0aGlzLl9oaWRlRXJyb3JNZXNzYWdlKGlucHV0KTtcbiAgICAgIHRoaXMuX3JlbW92ZUVycm9yU3R5bGVzKGlucHV0KTtcbiAgICB9KTtcbiAgfVxufVxuXG4vLyB0byBjaGVjayB0byBzZWUgaWYgc29tZXRoaW5nIGlzIGJlaW5nIGdyYWJiZWQgY29ycmVjdGx5XG4vLy8gdmlhIGRldiB0b29sczogaS5lLiB0eXBlIFwiaW5wdXQuaWRcIiB0byBzZWUgd2hpY2ggaW5wdXQgZnVuY3Rpb24gaXMgZ3JhYmJpbmdcbiIsImV4cG9ydCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoXG4gICAgeyBkYXRhLCBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZVRyYXNoQ2xpY2ssIGhhbmRsZUxpa2VDbGljaywgY3VycmVudElkIH0sXG4gICAgdGVtcGxhdGVTZWxlY3RvclxuICApIHtcbiAgICB0aGlzLl90ZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke3RlbXBsYXRlU2VsZWN0b3J9YCk7XG4gICAgdGhpcy5fZGF0YSA9IGRhdGE7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICAgIHRoaXMuX2hhbmRsZVRyYXNoQ2xpY2sgPSBoYW5kbGVUcmFzaENsaWNrO1xuICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayA9IGhhbmRsZUxpa2VDbGljaztcbiAgICB0aGlzLl9jdXJyZW50SWQgPSBjdXJyZW50SWQ7XG4gIH1cblxuICBjcmVhdGVDYXJkKCkge1xuICAgIHRoaXMuX2NhcmQgPSB0aGlzLl90ZW1wbGF0ZS5jb250ZW50XG4gICAgICAuY2xvbmVOb2RlKHRydWUpXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50XCIpO1xuXG4gICAgdGhpcy5fdGl0bGVFbGVtZW50ID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX3RpdGxlXCIpO1xuICAgIHRoaXMuX2ltZ0VsZW1lbnQgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9faW1hZ2VcIik7XG4gICAgdGhpcy5fdHJhc2hCdXR0b24gPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuZGVsZXRlLWJ1dHRvblwiKTtcbiAgICB0aGlzLl9saWtlc0NvdW50ZXIgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIubGlrZS1idXR0b25fX2NvdW50ZXJcIik7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5saWtlLWJ1dHRvblwiKTtcblxuXG4gICAgdGhpcy5fb3duZXJJZCA9IHRoaXMuX2RhdGEub3duZXIuX2lkO1xuXG4gICAgaWYgKHRoaXMuX2N1cnJlbnRJZCAhPT0gdGhpcy5fb3duZXJJZCkge1xuICAgICAgdGhpcy5fdHJhc2hCdXR0b24uY2xhc3NMaXN0LmFkZChcImRlbGV0ZS1idXR0b25faGlkZGVuXCIpO1xuICAgIH1cblxuICAgIHRoaXMuc2V0TGlrZXNJbmZvKHRoaXMuX2RhdGEubGlrZXMpO1xuXG4gICAgdGhpcy5faW1nRWxlbWVudC5zcmMgPSB0aGlzLl9kYXRhLmxpbms7XG4gICAgdGhpcy5faW1nRWxlbWVudC5hbHQgPSB0aGlzLl9kYXRhLm5hbWU7XG4gICAgdGhpcy5fdGl0bGVFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5fZGF0YS5uYW1lO1xuXG4gICAgLy8gY2xpY2sgb24gaW1nIHRvIG9wZW4gaW1nIG1vZGFsIChjYXVzZXMgaW5pdGlhbCBjYXJkcyBub3QgdG8gc2hvdyB1cClcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHJldHVybiB0aGlzLl9jYXJkO1xuICB9XG5cbiAgc2V0TGlrZXNJbmZvKGxpa2VzKSB7XG4gICAgdGhpcy5fbGlrZXMgPSBsaWtlcztcbiAgICB0aGlzLl91cGRhdGVMaWtlQ291bnQoKTtcbiAgfVxuXG4gIF91cGRhdGVMaWtlQ291bnQoKSB7XG4gICAgdGhpcy5fbGlrZXNDb3VudGVyLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xuXG4gICAgY29uc3QgaXNIZWFydGVkID0gdGhpcy5fbGlrZXMuc29tZSgobGlrZSkgPT4gbGlrZS5faWQgPT09IHRoaXMuX2N1cnJlbnRJZCk7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwibGlrZS1idXR0b25fYWN0aXZlXCIsIGlzSGVhcnRlZCk7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5faW1nRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGRhdGEpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayhkYXRhKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX3RyYXNoQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBpZiAodGhpcy5fY3VycmVudElkID09PSB0aGlzLl9vd25lcklkKSB7XG4gICAgICAgIHRoaXMuX3RyYXNoQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJkZWxldGUtYnV0dG9uX2hpZGRlblwiKTtcbiAgICAgICAgdGhpcy5faGFuZGxlVHJhc2hDbGljaygpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gbGlrZS91bmxpa2UgYnV0dG9uXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrKCk7XG4gICAgfSk7XG4gIH1cblxuICBkZWxldGVDYXJkKCkge1xuICAgIHRoaXMuX2NhcmQucmVtb3ZlKCk7XG4gIH1cblxuICBpc0xpa2VkKCkge1xuICAgIGNvbnN0IGJ1dHRvblN0YXR1cyA9IHRoaXMuX2xpa2VCdXR0b25cbiAgICAgIC5jbGFzc0xpc3QuY29udGFpbnMoXCJsaWtlLWJ1dHRvbl9hY3RpdmVcIik7XG5cbiAgICBpZiAoYnV0dG9uU3RhdHVzID09PSB0cnVlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIGlmIChidXR0b25TdGF0dXMgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke3BvcHVwU2VsZWN0b3J9YCk7XG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwLWZvcm1fb3BlblwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwLWZvcm1fb3BlblwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UoZSkge1xuICAgIGlmIChlLmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIC8vIGlmIGNsaWNrIG91dHNpZGUgcG9wdXAgb3IgY2xpY2sgb24geCBidXR0b24sIGNsb3NlIHBvcHVwLlxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChlKSA9PiB7XG4gICAgICBpZiAoXG4gICAgICAgIGUudGFyZ2V0ID09PSB0aGlzLl9wb3B1cEVsZW1lbnQgfHxcbiAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiY2xvc2UtYnV0dG9uXCIpXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCB9KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIucG9wdXAtZm9ybV9faW5wdXQtY29udGFpbmVyXCJcbiAgICApO1xuICAgIHRoaXMuX2Zvcm1JbnB1dHMgPVxuICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXAtZm9ybV9faW5wdXRcIik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xuXG4gICAgdGhpcy5fZm9ybUlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWVzO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICB9KTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xuICB9XG59XG4iLCIvL2xvY2FsIGltYWdlc1xuY29uc3QgVHJhbXdheSA9IHJlcXVpcmUoXCIuLi9pbWFnZXMvUGFsbS1TcHJpbmdzLUFlcmlhbC1UcmFtd2F5LWNvbG9yZml4LmpwZ1wiKTtcbmNvbnN0IENlZGFyUHQgPSByZXF1aXJlKFwiLi4vaW1hZ2VzL0NvcmtzY3Jld18oQ2VkYXJfUG9pbnQpXzAxLmpwZ1wiKTtcbmNvbnN0IFBvd1dvdyA9IHJlcXVpcmUoXCIuLi9pbWFnZXMvamVzcy1saW5kbmVyLXhlZ3lEbjEtU29ZLXVuc3BsYXNoLWNvbG9yZml4LmpwZ1wiKTtcbmNvbnN0IENvbFdpbGxpYW1zYnVyZyA9IHJlcXVpcmUoXCIuLi9pbWFnZXMvQ29sb25pYWwtV2lsbGlhbXNidXJnLVZpcmdpbmlhc2l6ZWZpeC0yLmpwZ1wiKTtcbmNvbnN0IFB1ZXJ0b1JpY28gPSByZXF1aXJlKFwiLi4vaW1hZ2VzL2plbm5pZmVyLWNoZW4teVhKaUMyVWpJQm8tdW5zcGxhc2gtY29sb3JmaXguanBnXCIpO1xuY29uc3QgRGlzbmV5V29ybGQgPSByZXF1aXJlKFwiLi4vaW1hZ2VzL3NhbmRyby1nb256YWxlei1kQkVKRzZodjIyNC11bnNwbGFzaC5qcGdcIik7XG5cbi8vbG9vcCBmb3IgaW5pdGlhbCBjYXJkc1xuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIHRpdGxlOiBcIlBhbG0gU3ByaW5ncyBBZXJpYWwgVHJhbXdheVwiLFxuICAgIHVybDogVHJhbXdheSxcbiAgfSxcbiAge1xuICAgIHRpdGxlOiBcIkNlZGFyIFBvaW50LCBPSFwiLFxuICAgIHVybDogQ2VkYXJQdCxcbiAgfSxcbiAge1xuICAgIHRpdGxlOiBcIk4uQS4gUG93IFdvd3NcIixcbiAgICB1cmw6IFBvd1dvdyxcbiAgfSxcbiAge1xuICAgIHRpdGxlOiBcIkNvbG9uaWFsIFdpbGxpYW1zYnVyZ1wiLFxuICAgIHVybDogQ29sV2lsbGlhbXNidXJnLFxuICB9LFxuICB7XG4gICAgdGl0bGU6IFwiT2xkIFNhbiBKdWFuLCBQdWVydG8gUmljb1wiLFxuICAgIHVybDogUHVlcnRvUmljbyxcbiAgfSxcbiAge1xuICAgIHRpdGxlOiBcIkRpc25leSBXb3JsZFwiLFxuICAgIHVybDogRGlzbmV5V29ybGQsXG4gIH0sXG5dO1xuXG5leHBvcnQgY29uc3QgdmFsaWRhdGlvbkNvbmZpZyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5wb3B1cC1mb3JtX19pbnB1dC1jb250YWluZXJcIixcbiAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXAtZm9ybV9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnN1Ym1pdC1idXR0b25cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cC1mb3JtX19zdWJtaXQtYnV0dG9uX3R5cGVfZGlzYWJsZWRcIixcbiAgZXJyb3JUZXh0U2VsZWN0b3I6IFwiLnBvcHVwLWZvcm1fX2Vycm9yLXRleHRcIixcbiAgaW5wdXRIYXNFcnJvcjogXCJwb3B1cC1mb3JtX19pbnB1dF9oYXNfZXJyb3JcIixcbiAgZXJyb3JUZXh0VmlzaWJsZTogXCJwb3B1cC1mb3JtX19lcnJvci10ZXh0X3Zpc2libGVcIixcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJMb2FkaW5nKHN1Ym1pdEJ1dHRvbiwgaXNMb2FkaW5nKSB7XG4gIGlmIChpc0xvYWRpbmcgPT09IHRydWUpIHtcbiAgICBzdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xuICB9IGVsc2Uge1xuICAgIHN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2ZVwiO1xuICB9XG59XG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuXG5pbXBvcnQgeyBGb3JtVmFsaWRhdG9yIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IHsgQ2FyZCB9IGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRGVsZXRlQ29uZmlybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhEZWxldGVDb25maXJtLmpzXCI7XG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xuXG5pbXBvcnQgeyB2YWxpZGF0aW9uQ29uZmlnLCByZW5kZXJMb2FkaW5nIH0gZnJvbSBcIi4uL3V0aWxzL0NvbnN0YW50cy5qc1wiO1xuXG4vL2J1dHRvbnNcbmNvbnN0IGVkaXRQcm9maWxlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LWJ1dHRvblwiKTtcbmNvbnN0IGFkZENhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZC1idXR0b25cIik7XG5jb25zdCBlZGl0UHJvZmlsZVBpY0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1waWMtYnV0dG9uXCIpO1xuY29uc3QgY3JlYXRlQ2FyZFN1Ym1pdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY3JlYXRlLWJ1dHRvblwiKTtcbmNvbnN0IGVkaXRQb3B1cFN1Ym1pdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1zdWJtaXRcIik7XG5jb25zdCBlZGl0UHJvZmlsZVBpY1N1Ym1pdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1waWMtYnV0dG9uXCIpO1xuXG4vL2lucHV0c1xuY29uc3QgaW5wdXROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNuYW1lXCIpO1xuY29uc3QgaW5wdXRKb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Fib3V0XCIpO1xuXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTEyXCIsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcIjliOTkxZjg2LTM2OGQtNGVmMy05NjNjLWI5MTU4MDgyMWM0NlwiLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9LFxufSk7XG5cbi8vZmV0Y2hlcyB0aGUgdXNlcidzIGluZm8gaW5jbHVkaW5nIGlkLiBEZWNsYXJlIGxldCBhbmQgc2V0IGl0IGFzIG51bGwsIHRoZW4gY2hhbmdlIGl0J3MgdmFsdWUgaW4gdGhlIGFwaSBiZWxvd1xuXG5sZXQgdXNlcklkID0gbnVsbDtcbmNvbnN0IGNhcmRMaXN0ID0gbmV3IFNlY3Rpb24oXCJlbGVtZW50c1wiKTtcblxuYXBpLmdldEFwcEluZm8oKVxuLnRoZW4oKFtpbmZvLCBjYXJkRGF0YV0pID0+IHtcbiAgdXNlcklkID0gaW5mby5faWQ7XG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKGluZm8pO1xuXG4gIGNhcmREYXRhLnJldmVyc2UoKTtcbiAgY2FyZERhdGEuZm9yRWFjaCgoZGF0YSkgPT4ge1xuICAgIGNhcmRMaXN0LmFkZEl0ZW0oY3JlYXRlQ2FyZChkYXRhKSk7XG4gIH0pXG59KVxuLmNhdGNoKGVyciA9PiB7XG4gIGNvbnNvbGUubG9nKGBBbiBlcnJvciBvY2N1cnJlZCBnZXR0aW5nIHVzZXIgaW5mbyBhbmQgYWRkaW5nIHRoZSBpbml0aWFsIGNhcmRzOiAke2Vycn1gKTtcbn0pO1xuXG5jb25zdCBjcmVhdGVDYXJkID0gKGRhdGEpID0+IHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxuICAgIHtcbiAgICAgIGN1cnJlbnRJZDogdXNlcklkLFxuICAgICAgZGF0YSxcbiAgICAgIGhhbmRsZUNhcmRDbGljazogKCkgPT4ge1xuICAgICAgICBpbWFnZVBvcHVwLm9wZW4oe1xuICAgICAgICAgIHVybDogZGF0YS5saW5rLFxuICAgICAgICAgIHRpdGxlOiBkYXRhLm5hbWUsXG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIGhhbmRsZVRyYXNoQ2xpY2s6ICgpID0+IHtcbiAgICAgICAgZGVsZXRlQ29uZmlybVBvcHVwRm9ybS5vcGVuKCgpID0+IHtcbiAgICAgICAgICBhcGlcbiAgICAgICAgICAgIC5yZW1vdmVDYXJkKHsgX2lkOiBkYXRhLl9pZCB9KVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICBjYXJkLmRlbGV0ZUNhcmQoKTtcbiAgICAgICAgICAgICAgZGVsZXRlQ29uZmlybVBvcHVwRm9ybS5jbG9zZSgpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBUaGVyZSB3YXMgYW4gaXNzdWUgZGVsZXRpbmcgdGhpcyBjYXJkOiAke2Vycn1gKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBoYW5kbGVMaWtlQ2xpY2s6ICgpID0+IHtcbiAgICAgICAgYXBpLnRvZ2dsZUxpa2VDYXJkU3RhdHVzKGRhdGEuX2lkLCBjYXJkLmlzTGlrZWQoKSlcbiAgICAgICAgLnRoZW4oKG5ld0RhdGEpID0+IHtcbiAgICAgICAgICBjYXJkLnNldExpa2VzSW5mbyhuZXdEYXRhLmxpa2VzKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgVGhlcmUgd2FzIGFuIGlzc3VlIGxpa2luZyB0aGlzIGNhcmQ6ICR7ZXJyfWApXG4gICAgICAgIH0pXG4gICAgICB9LFxuICAgIH0sXG4gICAgXCJjYXJkLXRlbXBsYXRlXCJcbiAgKTtcbiAgcmV0dXJuIGNhcmQuY3JlYXRlQ2FyZCgpO1xufTtcblxuY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcImltYWdlLXBvcHVwXCIpO1xuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIG5hbWVTZWxlY3RvcjogXCJwcm9maWxlX19uYW1lXCIsXG4gIGRlc2NyaXB0aW9uU2VsZWN0b3I6IFwicHJvZmlsZV9fZGVzY3JpcHRpb25cIixcbiAgYXZhdGFyU2VsZWN0b3I6IFwicHJvZmlsZV9faW1hZ2VcIixcbn0pO1xuXG5jb25zdCBlZGl0UHJvZmlsZVBvcHVwRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3RvcjogXCJlZGl0LXBvcHVwLWZvcm1cIixcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGRhdGEpID0+IHtcbiAgICByZW5kZXJMb2FkaW5nKGVkaXRQb3B1cFN1Ym1pdEJ1dHRvbiwgdHJ1ZSk7XG4gICAgYXBpXG4gICAgICAuc2V0VXNlckluZm8oZGF0YSlcbiAgICAgIC50aGVuKChpbmZvKSA9PiB7XG4gICAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGluZm8pO1xuICAgICAgICBlZGl0UHJvZmlsZVBvcHVwRm9ybS5jbG9zZSgpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBBbiBlcnJvciBvY2N1cnJlZCB1cGRhdGluZyB1c2VyIGluZm9ybWF0aW9uOiAke2Vycn1gKVxuICAgICAgfSlcblxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICByZW5kZXJMb2FkaW5nKGVkaXRQb3B1cFN1Ym1pdEJ1dHRvbiwgZmFsc2UpO1xuICAgICAgfSk7XG4gIH0sXG59KTtcblxuY29uc3QgY3JlYXRlQ2FyZFBvcHVwRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3RvcjogXCJjcmVhdGUtcG9wdXAtZm9ybVwiLFxuICBoYW5kbGVGb3JtU3VibWl0OiAoZGF0YSkgPT4ge1xuICAgIHJlbmRlckxvYWRpbmcoY3JlYXRlQ2FyZFN1Ym1pdEJ1dHRvbiwgdHJ1ZSk7XG4gICAgYXBpXG4gICAgICAuYWRkQ2FyZChkYXRhKVxuICAgICAgLnRoZW4oKGNhcmREYXRhKSA9PiB7XG4gICAgICAgIGNhcmRMaXN0LmFkZEl0ZW0oY3JlYXRlQ2FyZChjYXJkRGF0YSkpO1xuICAgICAgICBjcmVhdGVDYXJkUG9wdXBGb3JtLmNsb3NlKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coYEFuIGVycm9yIGhhZCBvY2N1cnJlZCB3aGlsZSBhZGRpbmcgeW91ciBjYXJkIDooIDogJHtlcnJ9YClcbiAgICAgIH0pXG5cbiAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgcmVuZGVyTG9hZGluZyhjcmVhdGVDYXJkU3VibWl0QnV0dG9uLCBmYWxzZSk7XG4gICAgICB9KTtcbiAgfSxcbn0pO1xuXG5cbmNvbnN0IGRlbGV0ZUNvbmZpcm1Qb3B1cEZvcm0gPSBuZXcgUG9wdXBXaXRoRGVsZXRlQ29uZmlybSh7XG4gIHBvcHVwU2VsZWN0b3I6IFwiZGVsZXRlLWNvbmZpcm1hdGlvbi1wb3B1cFwiLFxuICBoYW5kbGVEZWxldGVDYXJkOiAoKSA9PiB7fSxcbn0pO1xuXG5jb25zdCBwcm9maWxlUGljUG9wdXBGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiBcInByb2ZpbGUtcGljdHVyZS1wb3B1cFwiLFxuICBoYW5kbGVGb3JtU3VibWl0OiAoZGF0YSkgPT4ge1xuICAgIHJlbmRlckxvYWRpbmcoZWRpdFByb2ZpbGVQaWNTdWJtaXRCdXR0b24sIHRydWUpO1xuICAgIGFwaVxuICAgICAgLnVwZGF0ZVByb2ZpbGVQaWN0dXJlKHtcbiAgICAgICAgYXZhdGFyOiBkYXRhLnVybCxcbiAgICAgICAgX2lkOiBkYXRhLl9pZFxuICAgICAgfSlcbiAgICAgIC50aGVuKChpbmZvKSA9PiB7XG4gICAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGluZm8pO1xuICAgICAgICBwcm9maWxlUGljUG9wdXBGb3JtLmNsb3NlKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coYEFuIGVycm9yIGhhZCBvY2N1cnJlZCB1cGRhdGluZyBwcm9maWxlIHBpY3R1cmU6ICR7ZXJyfWApXG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICByZW5kZXJMb2FkaW5nKGVkaXRQcm9maWxlUGljU3VibWl0QnV0dG9uLCBmYWxzZSk7XG4gICAgICB9KTtcbiAgfSxcbn0pO1xuXG5jb25zdCBlZGl0UHJvZmlsZVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICB2YWxpZGF0aW9uQ29uZmlnLFxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtcG9wdXAtZm9ybVwiKVxuKTtcbmVkaXRQcm9maWxlVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgY3JlYXRlQ2FyZFZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICB2YWxpZGF0aW9uQ29uZmlnLFxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NyZWF0ZS1wb3B1cC1mb3JtXCIpXG4pO1xuY3JlYXRlQ2FyZFZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IHByb2ZpbGVQaWNWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgdmFsaWRhdGlvbkNvbmZpZyxcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLXBpY3R1cmUtcG9wdXBcIilcbik7XG5wcm9maWxlUGljVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuZWRpdFByb2ZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgZWRpdFByb2ZpbGVQb3B1cEZvcm0ub3BlbigpO1xuICBjb25zdCB7IG5hbWUsIGFib3V0IH0gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBpbnB1dE5hbWUudmFsdWUgPSBuYW1lO1xuICBpbnB1dEpvYi52YWx1ZSA9IGFib3V0O1xuICBlZGl0UHJvZmlsZVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcbn0pO1xuXG5hZGRDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNyZWF0ZUNhcmRWYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG4gIGNyZWF0ZUNhcmRQb3B1cEZvcm0ub3BlbigpO1xufSk7XG5cbmVkaXRQcm9maWxlUGljQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIHByb2ZpbGVQaWNWYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG4gIHByb2ZpbGVQaWNQb3B1cEZvcm0ub3BlbigpO1xufSk7XG5cbmltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmVkaXRQcm9maWxlUG9wdXBGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5jcmVhdGVDYXJkUG9wdXBGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5kZWxldGVDb25maXJtUG9wdXBGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wcm9maWxlUGljUG9wdXBGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcbiAgfVxuXG4gIC8vIHVzZWQgdG8gZ2V0IHRoZSBzZXJ2ZXIgcmVzcG9uc2VcbiAgX2hhbmRsZVNlcnZlclJlc3BvbnNlKHJlcykge1xuICAgIHJldHVybiByZXMub2sgPyByZXMuanNvbigpIDogUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gIH1cblxuICBnZXRBcHBJbmZvKCkge1xuICAgIHJldHVybiBQcm9taXNlLmFsbChbdGhpcy5nZXRVc2VySW5mbygpLCB0aGlzLmdldEluaXRpYWxDYXJkTGlzdCgpXSk7XG4gIH1cblxuICAvL3VzZWQgdG8gcmVxdWVzdCB1c2VyIGluZm9cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX2hhbmRsZVNlcnZlclJlc3BvbnNlKTtcbiAgfVxuXG4gIC8vdXNlZCB0byBpbnNlcnQgdXNlciBpbmZvXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgYWJvdXQsXG4gICAgICB9KSxcbiAgICB9KS50aGVuKHRoaXMuX2hhbmRsZVNlcnZlclJlc3BvbnNlKTtcbiAgfVxuXG4gIC8vIHVzZWQgdG8gaW5zZXJ0IHByb2ZpbGUgcGljXG4gIHVwZGF0ZVByb2ZpbGVQaWN0dXJlKHsgYXZhdGFyIH0pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBhdmF0YXIsXG4gICAgICB9KSxcbiAgICB9KS50aGVuKHRoaXMuX2hhbmRsZVNlcnZlclJlc3BvbnNlKTtcbiAgfVxuXG4gIC8vIHVzZWQgdG8gZ2V0IGluaXRpYWwgY2FyZHMgZnJvbSBzZXJ2ZXJcbiAgZ2V0SW5pdGlhbENhcmRMaXN0KCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVTZXJ2ZXJSZXNwb25zZSk7XG4gIH1cblxuICAvLyB1c2VkIHRvIGFkZCBjYXJkcyB0byBwYWdlXG4gIGFkZENhcmQoeyBuYW1lLCBsaW5rIH0pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgbGluayxcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4odGhpcy5faGFuZGxlU2VydmVyUmVzcG9uc2UpO1xuICB9XG5cbiAgLy8gcmVtb3ZlcyBjYXJkc1xuICByZW1vdmVDYXJkKHsgX2lkIH0pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtfaWR9YCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX2hhbmRsZVNlcnZlclJlc3BvbnNlKTtcbiAgfVxuXG4gIHRvZ2dsZUxpa2VDYXJkU3RhdHVzKGNhcmRJZCwgbGlrZSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IGxpa2UgPyBcIlBVVFwiIDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVTZXJ2ZXJSZXNwb25zZSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcihjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2NvbnRhaW5lclNlbGVjdG9yfWApO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIG9wZW4oeyB1cmwsIHRpdGxlIH0pIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cC1mb3JtX19jYXB0aW9uXCIpLnRleHRDb250ZW50ID1cbiAgICAgIHRpdGxlO1xuICAgIHRoaXMuX2ltZ0VsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cC1mb3JtX19pbWFnZVwiKTtcbiAgICB0aGlzLl9pbWdFbGVtZW50LnNyYyA9IHVybDtcbiAgICB0aGlzLl9pbWdFbGVtZW50LmFsdCA9IHRpdGxlO1xuXG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBkZXNjcmlwdGlvblNlbGVjdG9yLCBhdmF0YXJTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtuYW1lU2VsZWN0b3J9YCk7XG4gICAgdGhpcy5fZGVzY3JpcHRpb25FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAuJHtkZXNjcmlwdGlvblNlbGVjdG9yfWBcbiAgICApO1xuICAgIHRoaXMuX2F2YXRhckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHthdmF0YXJTZWxlY3Rvcn1gKTtcbiAgfVxuICAvL3JldHVybnMgYW4gb2JqZWN0IHdpdGggaW5mbyBhYm91dCB0aGUgdXNlclxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgICBhYm91dDogdGhpcy5fZGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50LFxuICAgICAgX2lkOiB0aGlzLl91c2VySWQsXG4gICAgICBhdmF0YXI6IHRoaXMuX2F2YXRhckVsZW1lbnQuc3JjLFxuICAgIH07XG4gIH1cbiAgLy90YWtlcyBuZXcgdXNlciBkYXRhIGFuZCBhZGRzIGl0IG9uIHRoZSBwYWdlXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQsIF9pZCwgYXZhdGFyIH0pIHtcbiAgICBpZiAobmFtZSkgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIGlmIChhYm91dCkgdGhpcy5fZGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gYWJvdXQ7XG4gICAgaWYgKF9pZCkgdGhpcy5faWQgPSBfaWQ7XG4gICAgaWYgKGF2YXRhcikgdGhpcy5fYXZhdGFyRWxlbWVudC5zcmMgPSBhdmF0YXI7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhEZWxldGVDb25maXJtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCA9IHRoaXMuX2hhbmRsZURlbGV0ZUNhcmQ7XG4gIH1cblxuICBvcGVuKGRlbGV0ZUNhcmQpIHtcbiAgICBzdXBlci5vcGVuKCk7XG4gICAgdGhpcy5kZWxldGVDYXJkID0gZGVsZXRlQ2FyZDtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICBjb25zdCBkZWxldGVDb25maXJtQnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY29uZmlybWF0aW9uLWJ1dHRvblwiKTtcblxuICAgIGRlbGV0ZUNvbmZpcm1CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuZGVsZXRlQ2FyZCgpO1xuICAgIH0pO1xuICB9XG59XG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJwIiwiRm9ybVZhbGlkYXRvciIsImNvbnN0cnVjdG9yIiwiY29uZmlnIiwiZm9ybUVsZW1lbnQiLCJ0aGlzIiwiX2NvbmZpZyIsIl9mb3JtRWxlbWVudCIsImVuYWJsZVZhbGlkYXRpb24iLCJzZXRFdmVudExpc3RlbmVycyIsIl9pbnB1dHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdG4iLCJxdWVyeVNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJmb3JFYWNoIiwiaW5wdXQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZ0IiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl91cGRhdGVTdWJtaXRCdXR0b24iLCJoYXNFcnJvcnMiLCJfY2hlY2tGaWVsZHNWYWxpZGl0eSIsIl9zZXRTdWJtaXRCdXR0b25TdGF0ZSIsImRpc2FibGVkIiwiQXJyYXkiLCJmcm9tIiwic29tZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfcmVtb3ZlRXJyb3JTdHlsZXMiLCJfaGlkZUVycm9yTWVzc2FnZSIsIl9hZGRFcnJvclN0eWxlcyIsIl9zaG93RXJyb3JNZXNzYWdlIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiaW5wdXRIYXNFcnJvciIsImlkIiwiZXJyb3JUZXh0VmlzaWJsZSIsImFkZCIsImVycm9yTWVzc2FnZUVsZW1lbnQiLCJ0ZXh0Q29udGVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwicmVzZXRWYWxpZGF0aW9uIiwiQ2FyZCIsInRlbXBsYXRlU2VsZWN0b3IiLCJkYXRhIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlVHJhc2hDbGljayIsImhhbmRsZUxpa2VDbGljayIsImN1cnJlbnRJZCIsIl90ZW1wbGF0ZSIsImRvY3VtZW50IiwiX2RhdGEiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZVRyYXNoQ2xpY2siLCJfaGFuZGxlTGlrZUNsaWNrIiwiX2N1cnJlbnRJZCIsImNyZWF0ZUNhcmQiLCJfY2FyZCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfdGl0bGVFbGVtZW50IiwiX2ltZ0VsZW1lbnQiLCJfdHJhc2hCdXR0b24iLCJfbGlrZXNDb3VudGVyIiwiX2xpa2VCdXR0b24iLCJfb3duZXJJZCIsIm93bmVyIiwiX2lkIiwic2V0TGlrZXNJbmZvIiwibGlrZXMiLCJzcmMiLCJsaW5rIiwiYWx0IiwibmFtZSIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9saWtlcyIsIl91cGRhdGVMaWtlQ291bnQiLCJsZW5ndGgiLCJpc0hlYXJ0ZWQiLCJsaWtlIiwidG9nZ2xlIiwiZGVsZXRlQ2FyZCIsImlzTGlrZWQiLCJidXR0b25TdGF0dXMiLCJjb250YWlucyIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwib3BlbiIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImUiLCJrZXkiLCJ0YXJnZXQiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX2Zvcm0iLCJfZm9ybUlucHV0cyIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2dldElucHV0VmFsdWVzIiwiX2Zvcm1WYWx1ZXMiLCJ2YWx1ZSIsInByZXZlbnREZWZhdWx0IiwicmVzZXQiLCJyZXF1aXJlIiwidmFsaWRhdGlvbkNvbmZpZyIsImZvcm1TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJlcnJvclRleHRTZWxlY3RvciIsInJlbmRlckxvYWRpbmciLCJzdWJtaXRCdXR0b24iLCJpc0xvYWRpbmciLCJlZGl0UHJvZmlsZUJ1dHRvbiIsImFkZENhcmRCdXR0b24iLCJlZGl0UHJvZmlsZVBpY0J1dHRvbiIsImNyZWF0ZUNhcmRTdWJtaXRCdXR0b24iLCJlZGl0UG9wdXBTdWJtaXRCdXR0b24iLCJlZGl0UHJvZmlsZVBpY1N1Ym1pdEJ1dHRvbiIsImlucHV0TmFtZSIsImlucHV0Sm9iIiwiYXBpIiwiYmFzZVVybCIsImhlYWRlcnMiLCJfYmFzZVVybCIsIl9oZWFkZXJzIiwiX2hhbmRsZVNlcnZlclJlc3BvbnNlIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImdldEFwcEluZm8iLCJhbGwiLCJnZXRVc2VySW5mbyIsImdldEluaXRpYWxDYXJkTGlzdCIsImZldGNoIiwidGhlbiIsInNldFVzZXJJbmZvIiwiYWJvdXQiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInVwZGF0ZVByb2ZpbGVQaWN0dXJlIiwiYXZhdGFyIiwiYWRkQ2FyZCIsInJlbW92ZUNhcmQiLCJ0b2dnbGVMaWtlQ2FyZFN0YXR1cyIsImNhcmRJZCIsImF1dGhvcml6YXRpb24iLCJ1c2VySWQiLCJjYXJkTGlzdCIsImNvbnRhaW5lclNlbGVjdG9yIiwiX2NvbnRhaW5lciIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsImluZm8iLCJjYXJkRGF0YSIsInVzZXJJbmZvIiwicmV2ZXJzZSIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImNhcmQiLCJpbWFnZVBvcHVwIiwidXJsIiwidGl0bGUiLCJkZWxldGVDb25maXJtUG9wdXBGb3JtIiwibmV3RGF0YSIsIm5hbWVTZWxlY3RvciIsImRlc2NyaXB0aW9uU2VsZWN0b3IiLCJhdmF0YXJTZWxlY3RvciIsIl9uYW1lRWxlbWVudCIsIl9kZXNjcmlwdGlvbkVsZW1lbnQiLCJfYXZhdGFyRWxlbWVudCIsIl91c2VySWQiLCJlZGl0UHJvZmlsZVBvcHVwRm9ybSIsImZpbmFsbHkiLCJjcmVhdGVDYXJkUG9wdXBGb3JtIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJoYW5kbGVEZWxldGVDYXJkIiwicHJvZmlsZVBpY1BvcHVwRm9ybSIsImVkaXRQcm9maWxlVmFsaWRhdG9yIiwiY3JlYXRlQ2FyZFZhbGlkYXRvciIsInByb2ZpbGVQaWNWYWxpZGF0b3IiXSwic291cmNlUm9vdCI6IiJ9