!function(){"use strict";var e={243:function(e,t,r){e.exports=r.p+"d3edfb3fe0284e46cb86.jpg"},769:function(e,t,r){e.exports=r.p+"05f1a4a8dccb609a7ff3.jpg"},199:function(e,t,r){e.exports=r.p+"4317d98e0be2323014f4.jpg"},408:function(e,t,r){e.exports=r.p+"c699805af844af80a2db.jpg"},462:function(e,t,r){e.exports=r.p+"0bbb8e918e3becd29120.jpg"},329:function(e,t,r){e.exports=r.p+"205114d203f083e3e22b.jpg"}},t={};function r(o){var s=t[o];if(void 0!==s)return s.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}r.p="",function(){class e{constructor(e,t){this._config=e,this._formElement=t}enableValidation(){this.setEventListeners()}setEventListeners(){this._inputs=this._formElement.querySelectorAll(this._config.inputSelector),this._submitBtn=this._formElement.querySelector(this._config.submitButtonSelector),this._inputs.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e,this._formElement),this._updateSubmitButton()}))}))}_updateSubmitButton(){const e=this._checkFieldsValidity(this._inputs);this._setSubmitButtonState(e)}_setSubmitButtonState(e){this._submitBtn.disabled=e}_checkFieldsValidity(){return Array.from(this._inputs).some((e=>!e.validity.valid))}_checkInputValidity(e){e.validity.valid?(this._removeErrorStyles(e),this._hideErrorMessage(e)):(this._addErrorStyles(e),this._showErrorMessage(e))}_removeErrorStyles(e){e.classList.remove(this._config.inputHasError)}_hideErrorMessage(e){this._formElement.querySelector(".".concat(e.id,"-error")).classList.remove(this._config.errorTextVisible)}_addErrorStyles(e){e.classList.add(this._config.inputHasError)}_showErrorMessage(e){const t=this._formElement.querySelector(".".concat(e.id,"-error"));t.textContent=e.validationMessage,t.classList.add(this._config.errorTextVisible)}resetValidation(){this._updateSubmitButton(),this._inputs.forEach((e=>{this._hideErrorMessage(e),this._removeErrorStyles(e)}))}}class t{constructor(e,t){let{data:r,handleCardClick:o}=e;this._template=document.querySelector("#".concat(t)),this._data=r,this._handleCardClick=o}createCard(){this._card=this._template.content.cloneNode(!0).querySelector(".element");const e=this._card.querySelector(".element__title"),t=this._card.querySelector(".element__image");return t.src=this._data.url,t.alt=this._data.title,e.textContent=this._data.title,this._setEventListeners(),this._card}_setEventListeners(){this._card.querySelector(".element__image").addEventListener("click",(e=>{this._handleCardClick(e)})),this._card.querySelector(".delete-button").addEventListener("click",(()=>{this._deleteCardConfirmation()})),this._card.querySelector(".like-button").addEventListener("click",(()=>{this._toggleLike()}))}_toggleLike(){this._card.querySelector(".like-button").classList.toggle("like-button_active")}_deleteCardConfirmation(){document.querySelector("#delete-confirmation-popup").classList.add(".popup-form_open")}}class o{constructor(e){this._popupElement=document.querySelector("#".concat(e)),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("popup-form_open"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("popup-form_open"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popupElement.addEventListener("click",(e=>{(e.target===this._popupElement||e.target.classList.contains("close-button"))&&this.close()}))}}class s extends o{constructor(e){let{popupSelector:t,handleFormSubmit:r}=e;super(t),this._form=this._popupElement.querySelector(".popup-form__input-container"),this._formInputs=this._popupElement.querySelectorAll(".popup-form__input"),this._handleFormSubmit=r}_getInputValues(){return this._formValues={},this._formInputs.forEach((e=>{this._formValues[e.name]=e.value})),this._formValues}setEventListeners(){super.setEventListeners(),this._popupElement.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this.close()}))}resetForm(){this._form.reset()}}const n=[{title:"Palm Springs Aerial Tramway",url:r(199)},{title:"Cedar Point, OH",url:r(769)},{title:"N.A. Pow Wows",url:r(462)},{title:"Colonial Williamsburg",url:r(243)},{title:"Old San Juan, Puerto Rico",url:r(408)},{title:"Disney World",url:r(329)}],i={formSelector:".popup-form__input-container",inputSelector:".popup-form__input",submitButtonSelector:".submit-button",inactiveButtonClass:"popup-form__submit-button_type_disabled",errorTextSelector:".popup-form__error-text",inputHasError:"popup-form__input_has_error",errorTextVisible:"popup-form__error-text_visible"},l=(document.querySelector("#profile-pic-button"),document.querySelector("#edit-button")),c=document.querySelector(".add-button"),a=document.querySelector("#confirmation-button"),u=(document.querySelector("#delete-card-button"),document.querySelector("#name")),p=document.querySelector("#description"),d=new class extends o{open(e){let{url:t,title:r}=e;this._popupElement.querySelector(".popup-form__caption").textContent=r,this._imgElement=this._popupElement.querySelector(".popup-form__image"),this._imgElement.src=t,this._imgElement.alt=r,super.open()}}("image-popup"),m=e=>new t({data:e,handleCardClick:()=>{d.open(e)}},"card-template").createCard(),_=new class{constructor(e,t){let{items:r,renderer:o}=e;this._items=r,this._renderer=o,this._container=document.querySelector(".".concat(t))}renderItem(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:n,renderer:e=>{_.addItem(m(e))}},"elements"),h=new class{constructor(e){let{nameSelector:t,descriptionSelector:r}=e;this._nameElement=document.querySelector(".".concat(t)),this._descriptionElement=document.querySelector(".".concat(r))}getUserInfo(){return{name:this._nameElement.textContent,description:this._descriptionElement.textContent}}setUserInfo(e){let{name:t,description:r}=e;this._nameElement.textContent=t,this._descriptionElement.textContent=r}}({nameSelector:"profile__name",descriptionSelector:"profile__description"}),f=new s({popupSelector:"edit-popup-form",handleFormSubmit:e=>{h.setUserInfo(e)}}),E=new s({popupSelector:"create-popup-form",handleFormSubmit:e=>{_.addItem(m(e)),E.resetForm()}}),S=new class extends o{constructor(e){let{popupSelector:t}=e;super(t)}setEventListeners(){super.setEventListeners(),this._popupElement.querySelector("#confirmation-button").addEventListener("click",this.deleteCard())}deleteCard(){document.querySelector(".element").remove()}}({popupSelector:"delete-confirmation-popup"}),b=new e(i,document.querySelector("#edit-popup-form"));b.enableValidation();const y=new e(i,document.querySelector("#create-popup-form"));y.enableValidation(),l.addEventListener("click",(()=>{f.open();const{name:e,description:t}=h.getUserInfo();u.value=e,p.value=t,b.resetValidation()})),c.addEventListener("click",(()=>{E.resetForm(),y.resetValidation(),E.open()})),a.addEventListener("click",(()=>{S.deleteCard()})),_.renderItem(n),d.setEventListeners(),f.setEventListeners(),E.setEventListeners(),S.setEventListeners()}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LGlCQUFtQmpDLElBQ2pCc0UsRUFBU08sWUFBWTdFLE1BSW5CK0UsRUFBc0IsSUFBSS9DLEVBQWMsQ0FDNUNYLGNBQWUsb0JBQ2ZZLGlCQUFtQmpDLElBQ2pCMEQsRUFBU1MsUUFBUTdELEVBQVdOLElBQzVCK0UsRUFBb0JwQyxlQUlsQnFDLEVBQXlCLElJdEVoQixjQUFxQzVELEVBQ2hEakUsWUFBWSxHQUFpQixJQUFqQixjQUFDa0UsR0FBZ0IsRUFDekJhLE1BQU1iLEdBR1YzRCxvQkFDSXdFLE1BQU14RSxvQkFDTkosS0FBS2dFLGNBQWN2RCxjQUFjLHdCQUF3QkksaUJBQWlCLFFBQVNiLEtBQUsySCxjQUc1RkEsYUFDSTlFLFNBQVNwQyxjQUFjLFlBQVlzQixXSjJEZSxDQUN4RGdDLGNBQWUsOEJBR1g2RCxFQUF1QixJQUFJaEksRUFDL0I2RixFQUNBNUMsU0FBU3BDLGNBQWMscUJBRXpCbUgsRUFBcUJ6SCxtQkFFckIsTUFBTTBILEVBQXNCLElBQUlqSSxFQUM5QjZGLEVBQ0E1QyxTQUFTcEMsY0FBYyx1QkFFekJvSCxFQUFvQjFILG1CQUVwQjBGLEVBQWtCaEYsaUJBQWlCLFNBQVMsS0FDMUMyRyxFQUFxQnJELE9BQ3JCLE1BQU0sS0FBQ2UsRUFBRCxZQUFPb0MsR0FBZU4sRUFBU0ssY0FDckNyQixFQUFVYixNQUFRRCxFQUNsQmUsRUFBU2QsTUFBUW1DLEVBQ2pCTSxFQUFxQnJGLHFCQUd2QnVELEVBQWNqRixpQkFBaUIsU0FBUyxLQUN0QzRHLEVBQW9CcEMsWUFDcEJ3QyxFQUFvQnRGLGtCQUNwQmtGLEVBQW9CdEQsVUFHdEI0QixFQUFvQmxGLGlCQUFpQixTQUFTLEtBQzVDNkcsRUFBdUJDLGdCQUl6QnZCLEVBQVNPLFdBQVdwQixHQUNwQlcsRUFBVzlGLG9CQUNYb0gsRUFBcUJwSCxvQkFDckJxSCxFQUFvQnJILG9CQUNwQnNILEVBQXVCdEgsb0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvdXRpbHMvQ29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvcGFnZS9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhEZWxldGVDb25maXJtLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiOyIsIi8vIEZvcm0gVmFsaWRhdGlvbiBjbGFzcyBjb2RlXG5cbi8vIFwiY29uZmlnXCIgPSBhcnJheSBvZiBzZWxlY3RvcnMgJiBcImZvcm1FbGVtZW50XCIgPSBmb3JtXG5leHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgLy8gYWRkIGV2ZW50IGxpc3RlbmVyIGZ1bmN0aW9uOiBpdCB3aWxsIHVzZSBwYXJhbWV0ZXJzIGZvcm0gYW5kIHNldHRpbmdzLlxuICAvLyBzZWxlY3QgYWxsIG9mIHRoZSBpbnB1dHNcbiAgLy8vIHdhbnQgdG8gc2VsZWN0IHN1Ym1pdCBidXR0b24gaW4gdGhzIGZ4IHRvb1xuICAvLy8gYWRkIGEgcGFydCB0aGF0IGhhcyBhIGNvbmRpdGlvbiB3aGVyZSB0aGVyZSBpcyBhbiBlcnJvciBhbmQgd2hhdCB0byBkbyB0aGVuXG4gIC8vLyBhZGQgYnV0dG9uIGRpc2FibGUgdG9nZ2xlXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0cyA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXG4gICAgICB0aGlzLl9jb25maWcuaW5wdXRTZWxlY3RvclxuICAgICk7XG4gICAgdGhpcy5fc3VibWl0QnRuID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHRoaXMuX2NvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvclxuICAgICk7XG4gICAgLy9jaGVja3MgaW4gcHV0IHZhbGlkaXR5ICYgY2hlY2sgYWxsIGlucHV0cyBmb3IgdmFsaWRpdHlcbiAgICB0aGlzLl9pbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZXZ0KSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dCwgdGhpcy5fZm9ybUVsZW1lbnQpO1xuICAgICAgICB0aGlzLl91cGRhdGVTdWJtaXRCdXR0b24oKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgX3VwZGF0ZVN1Ym1pdEJ1dHRvbigpIHtcbiAgICBjb25zdCBoYXNFcnJvcnMgPSB0aGlzLl9jaGVja0ZpZWxkc1ZhbGlkaXR5KHRoaXMuX2lucHV0cyk7XG4gICAgdGhpcy5fc2V0U3VibWl0QnV0dG9uU3RhdGUoaGFzRXJyb3JzKTtcbiAgfVxuXG4gIC8vIHRvZ2dsZXMgdGhlIGJ1dHRvbiBiZXR3ZWVuIGRpc2FibGVkIGFuZCBlbmFibGVkXG4gIF9zZXRTdWJtaXRCdXR0b25TdGF0ZShoYXNFcnJvcnMpIHtcbiAgICB0aGlzLl9zdWJtaXRCdG4uZGlzYWJsZWQgPSBoYXNFcnJvcnM7XG4gIH1cblxuICAvLyB0dXJuIGlucHV0cyBpbnRvIGFuIGFycmF5LCB0YWtlIHNvbWUgaW5wdXQ7IHJldHVybiBzb2x1dGlvbiBpZiBpbnB1dCBpcyBpbnZhbGlkXG4gIF9jaGVja0ZpZWxkc1ZhbGlkaXR5KCkge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuX2lucHV0cykuc29tZSgoaW5wdXQpID0+ICFpbnB1dC52YWxpZGl0eS52YWxpZCk7XG4gIH1cblxuICAvLyByZW1vdmVzL2hpZGVzIGVycm9ycyBpZiBpbnB1dHMgYXJlIHZhbGlkXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpIHtcbiAgICBpZiAoaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3JlbW92ZUVycm9yU3R5bGVzKGlucHV0KTtcbiAgICAgIHRoaXMuX2hpZGVFcnJvck1lc3NhZ2UoaW5wdXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9hZGRFcnJvclN0eWxlcyhpbnB1dCk7XG4gICAgICB0aGlzLl9zaG93RXJyb3JNZXNzYWdlKGlucHV0KTtcbiAgICB9XG4gIH1cblxuICBfcmVtb3ZlRXJyb3JTdHlsZXMoaW5wdXQpIHtcbiAgICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbnB1dEhhc0Vycm9yKTtcbiAgfVxuXG4gIF9oaWRlRXJyb3JNZXNzYWdlKGlucHV0KSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgLiR7aW5wdXQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgZXJyb3JNZXNzYWdlRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5lcnJvclRleHRWaXNpYmxlKTtcbiAgfVxuXG4gIF9hZGRFcnJvclN0eWxlcyhpbnB1dCkge1xuICAgIGlucHV0LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmlucHV0SGFzRXJyb3IpO1xuICB9XG5cbiAgX3Nob3dFcnJvck1lc3NhZ2UoaW5wdXQpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAuJHtpbnB1dC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgZXJyb3JNZXNzYWdlRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5lcnJvclRleHRWaXNpYmxlKTtcbiAgfVxuXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl91cGRhdGVTdWJtaXRCdXR0b24oKTtcblxuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgdGhpcy5faGlkZUVycm9yTWVzc2FnZShpbnB1dCk7XG4gICAgICB0aGlzLl9yZW1vdmVFcnJvclN0eWxlcyhpbnB1dCk7XG4gICAgfSk7XG4gIH1cbn1cblxuLy8gdG8gY2hlY2sgdG8gc2VlIGlmIHNvbWV0aGluZyBpcyBiZWluZyBncmFiYmVkIGNvcnJlY3RseVxuLy8vIHZpYSBkZXYgdG9vbHM6IGkuZS4gdHlwZSBcImlucHV0LmlkXCIgdG8gc2VlIHdoaWNoIGlucHV0IGZ1bmN0aW9uIGlzIGdyYWJiaW5nXG4iLCJleHBvcnQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKHsgZGF0YSwgaGFuZGxlQ2FyZENsaWNrIH0sIHRlbXBsYXRlU2VsZWN0b3IpIHtcbiAgICB0aGlzLl90ZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke3RlbXBsYXRlU2VsZWN0b3J9YCk7XG4gICAgdGhpcy5fZGF0YSA9IGRhdGE7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICB9XG5cbiAgY3JlYXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9jYXJkID0gdGhpcy5fdGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50XCIpO1xuICAgXG4gICAgY29uc3QgdGl0bGVFbGVtZW50ID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX3RpdGxlXCIpO1xuICAgIGNvbnN0IGltZ0VsZW1lbnQgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9faW1hZ2VcIik7XG5cbiAgICBpbWdFbGVtZW50LnNyYyA9IHRoaXMuX2RhdGEudXJsO1xuICAgIGltZ0VsZW1lbnQuYWx0ID0gdGhpcy5fZGF0YS50aXRsZTtcbiAgICB0aXRsZUVsZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLl9kYXRhLnRpdGxlO1xuXG4gICAgLy8gY2xpY2sgb24gaW1nIHRvIG9wZW4gaW1nIG1vZGFsIChjYXVzZXMgaW5pdGlhbCBjYXJkcyBub3QgdG8gc2hvdyB1cClcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgcmV0dXJuIHRoaXMuX2NhcmQ7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7ICBcbiAgICBjb25zdCBpbWdFbGVtZW50ID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2ltYWdlXCIpO1xuXG4gICAgaW1nRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGRhdGEpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayhkYXRhKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5kZWxldGUtYnV0dG9uXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9kZWxldGVDYXJkQ29uZmlybWF0aW9uKCk7XG4gICAgfSk7XG5cbiAgICAvLyBsaWtlL3VubGlrZSBidXR0b25cbiAgICB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIubGlrZS1idXR0b25cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX3RvZ2dsZUxpa2UoKTtcbiAgICB9KTtcbiAgfVxuXG4gIF90b2dnbGVMaWtlKCkge1xuICAgIHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5saWtlLWJ1dHRvblwiKS5jbGFzc0xpc3QudG9nZ2xlKFwibGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICB9XG5cbiAgX2RlbGV0ZUNhcmRDb25maXJtYXRpb24oKSB7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNkZWxldGUtY29uZmlybWF0aW9uLXBvcHVwXCIpLmNsYXNzTGlzdC5hZGQoXCIucG9wdXAtZm9ybV9vcGVuXCIpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHtwb3B1cFNlbGVjdG9yfWApO1xuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJwb3B1cC1mb3JtX29wZW5cIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cC1mb3JtX29wZW5cIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlKGUpIHtcbiAgICBpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAvLyBpZiBjbGljayBvdXRzaWRlIHBvcHVwIG9yIGNsaWNrIG9uIHggYnV0dG9uLCBjbG9zZSBwb3B1cC5cbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICBpZiAoZS50YXJnZXQgPT09IHRoaXMuX3BvcHVwRWxlbWVudCB8fCBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJjbG9zZS1idXR0b25cIikpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCB9KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwLWZvcm1fX2lucHV0LWNvbnRhaW5lclwiKTtcbiAgICB0aGlzLl9mb3JtSW5wdXRzID1cbiAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwLWZvcm1fX2lucHV0XCIpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7fTtcblxuICAgIHRoaXMuX2Zvcm1JbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIHRoaXMuX2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlcztcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG4gIH1cblxuICByZXNldEZvcm0oKSB7XG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xuICB9XG59XG4iLCIvL2xvY2FsIGltYWdlc1xuY29uc3QgVHJhbXdheSA9IHJlcXVpcmUoXCIuLi9pbWFnZXMvUGFsbS1TcHJpbmdzLUFlcmlhbC1UcmFtd2F5LWNvbG9yZml4LmpwZ1wiKTtcbmNvbnN0IENlZGFyUHQgPSByZXF1aXJlKFwiLi4vaW1hZ2VzL0NvcmtzY3Jld18oQ2VkYXJfUG9pbnQpXzAxLmpwZ1wiKTtcbmNvbnN0IFBvd1dvdyA9IHJlcXVpcmUoXCIuLi9pbWFnZXMvamVzcy1saW5kbmVyLXhlZ3lEbjEtU29ZLXVuc3BsYXNoLWNvbG9yZml4LmpwZ1wiKTtcbmNvbnN0IENvbFdpbGxpYW1zYnVyZyA9IHJlcXVpcmUoXCIuLi9pbWFnZXMvQ29sb25pYWwtV2lsbGlhbXNidXJnLVZpcmdpbmlhc2l6ZWZpeC0yLmpwZ1wiKTtcbmNvbnN0IFB1ZXJ0b1JpY28gPSByZXF1aXJlKFwiLi4vaW1hZ2VzL2plbm5pZmVyLWNoZW4teVhKaUMyVWpJQm8tdW5zcGxhc2gtY29sb3JmaXguanBnXCIpO1xuY29uc3QgRGlzbmV5V29ybGQgPSByZXF1aXJlKFwiLi4vaW1hZ2VzL3NhbmRyby1nb256YWxlei1kQkVKRzZodjIyNC11bnNwbGFzaC5qcGdcIik7XG5cbi8vbG9vcCBmb3IgaW5pdGlhbCBjYXJkc1xuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIHRpdGxlOiBcIlBhbG0gU3ByaW5ncyBBZXJpYWwgVHJhbXdheVwiLFxuICAgIHVybDogVHJhbXdheSxcbiAgfSxcbiAge1xuICAgIHRpdGxlOiBcIkNlZGFyIFBvaW50LCBPSFwiLFxuICAgIHVybDogQ2VkYXJQdCxcbiAgfSxcbiAge1xuICAgIHRpdGxlOiBcIk4uQS4gUG93IFdvd3NcIixcbiAgICB1cmw6IFBvd1dvdyxcbiAgfSxcbiAge1xuICAgIHRpdGxlOiBcIkNvbG9uaWFsIFdpbGxpYW1zYnVyZ1wiLFxuICAgIHVybDogQ29sV2lsbGlhbXNidXJnLFxuICB9LFxuICB7XG4gICAgdGl0bGU6IFwiT2xkIFNhbiBKdWFuLCBQdWVydG8gUmljb1wiLFxuICAgIHVybDogUHVlcnRvUmljbyxcbiAgfSxcbiAge1xuICAgIHRpdGxlOiBcIkRpc25leSBXb3JsZFwiLFxuICAgIHVybDogRGlzbmV5V29ybGQsXG4gIH0sXG5dO1xuXG5leHBvcnQgY29uc3QgdmFsaWRhdGlvbkNvbmZpZyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5wb3B1cC1mb3JtX19pbnB1dC1jb250YWluZXJcIixcbiAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXAtZm9ybV9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnN1Ym1pdC1idXR0b25cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cC1mb3JtX19zdWJtaXQtYnV0dG9uX3R5cGVfZGlzYWJsZWRcIixcbiAgZXJyb3JUZXh0U2VsZWN0b3I6IFwiLnBvcHVwLWZvcm1fX2Vycm9yLXRleHRcIixcbiAgaW5wdXRIYXNFcnJvcjogXCJwb3B1cC1mb3JtX19pbnB1dF9oYXNfZXJyb3JcIixcbiAgZXJyb3JUZXh0VmlzaWJsZTogXCJwb3B1cC1mb3JtX19lcnJvci10ZXh0X3Zpc2libGVcIixcbn07XG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuXG5pbXBvcnQgeyBGb3JtVmFsaWRhdG9yIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IHsgQ2FyZCB9IGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRGVsZXRlQ29uZmlybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhEZWxldGVDb25maXJtLmpzXCI7XG5cbmltcG9ydCB7XG4gIGluaXRpYWxDYXJkcyxcbiAgdmFsaWRhdGlvbkNvbmZpZyxcbn0gZnJvbSBcIi4uL3V0aWxzL0NvbnN0YW50cy5qc1wiO1xuXG4vL2J1dHRvbnNcbmNvbnN0IGVkaXRQcm9maWxlSW1nQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLXBpYy1idXR0b25cIik7XG5jb25zdCBlZGl0UHJvZmlsZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1idXR0b25cIik7XG5jb25zdCBhZGRDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtYnV0dG9uXCIpO1xuY29uc3QgZGVsZXRlQ29uZmlybUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY29uZmlybWF0aW9uLWJ1dHRvblwiKTtcbmNvbnN0IGRlbGV0ZUNhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2RlbGV0ZS1jYXJkLWJ1dHRvblwiKTtcblxuLy9pbnB1dHNcbmNvbnN0IGlucHV0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbmFtZVwiKTtcbmNvbnN0IGlucHV0Sm9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNkZXNjcmlwdGlvblwiKTtcblxuXG5jb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiaW1hZ2UtcG9wdXBcIik7XG5cbmNvbnN0IGNyZWF0ZUNhcmQgPSAoZGF0YSkgPT4ge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXG4gICAge1xuICAgICAgZGF0YSxcbiAgICAgIGhhbmRsZUNhcmRDbGljazogKCkgPT4ge1xuICAgICAgICBpbWFnZVBvcHVwLm9wZW4oZGF0YSk7XG4gICAgICB9LFxuICAgIH0sXG4gICAgXCJjYXJkLXRlbXBsYXRlXCJcbiAgKTtcbiAgcmV0dXJuIGNhcmQuY3JlYXRlQ2FyZCgpO1xufTtcblxuY29uc3QgY2FyZExpc3QgPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gICAgcmVuZGVyZXI6IChkYXRhKSA9PiB7XG4gICAgICBjYXJkTGlzdC5hZGRJdGVtKGNyZWF0ZUNhcmQoZGF0YSkpO1xuICAgIH0sXG4gIH0sXG4gIFwiZWxlbWVudHNcIlxuKTtcblxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICBuYW1lU2VsZWN0b3I6IFwicHJvZmlsZV9fbmFtZVwiLFxuICBkZXNjcmlwdGlvblNlbGVjdG9yOiBcInByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXG59KTtcblxuY29uc3QgZWRpdFByb2ZpbGVQb3B1cEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHBvcHVwU2VsZWN0b3I6IFwiZWRpdC1wb3B1cC1mb3JtXCIsXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChkYXRhKSA9PiB7XG4gICAgdXNlckluZm8uc2V0VXNlckluZm8oZGF0YSk7XG4gIH0sXG59KTtcblxuY29uc3QgY3JlYXRlQ2FyZFBvcHVwRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3RvcjogXCJjcmVhdGUtcG9wdXAtZm9ybVwiLFxuICBoYW5kbGVGb3JtU3VibWl0OiAoZGF0YSkgPT4ge1xuICAgIGNhcmRMaXN0LmFkZEl0ZW0oY3JlYXRlQ2FyZChkYXRhKSk7XG4gICAgY3JlYXRlQ2FyZFBvcHVwRm9ybS5yZXNldEZvcm0oKTtcbiAgfSxcbn0pO1xuXG5jb25zdCBkZWxldGVDb25maXJtUG9wdXBGb3JtID0gbmV3IFBvcHVwV2l0aERlbGV0ZUNvbmZpcm0oe1xuICBwb3B1cFNlbGVjdG9yOiBcImRlbGV0ZS1jb25maXJtYXRpb24tcG9wdXBcIixcbn0pO1xuXG5jb25zdCBlZGl0UHJvZmlsZVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICB2YWxpZGF0aW9uQ29uZmlnLFxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtcG9wdXAtZm9ybVwiKVxuKTtcbmVkaXRQcm9maWxlVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgY3JlYXRlQ2FyZFZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICB2YWxpZGF0aW9uQ29uZmlnLFxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NyZWF0ZS1wb3B1cC1mb3JtXCIpXG4pO1xuY3JlYXRlQ2FyZFZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmVkaXRQcm9maWxlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGVkaXRQcm9maWxlUG9wdXBGb3JtLm9wZW4oKTtcbiAgY29uc3Qge25hbWUsIGRlc2NyaXB0aW9ufSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIGlucHV0TmFtZS52YWx1ZSA9IG5hbWU7XG4gIGlucHV0Sm9iLnZhbHVlID0gZGVzY3JpcHRpb247XG4gIGVkaXRQcm9maWxlVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xufSk7XG5cbmFkZENhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY3JlYXRlQ2FyZFBvcHVwRm9ybS5yZXNldEZvcm0oKTtcbiAgY3JlYXRlQ2FyZFZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcbiAgY3JlYXRlQ2FyZFBvcHVwRm9ybS5vcGVuKCk7XG59KTtcblxuZGVsZXRlQ29uZmlybUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBkZWxldGVDb25maXJtUG9wdXBGb3JtLmRlbGV0ZUNhcmQoKTtcbn0pO1xuXG5cbmNhcmRMaXN0LnJlbmRlckl0ZW0oaW5pdGlhbENhcmRzKTtcbmltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmVkaXRQcm9maWxlUG9wdXBGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5jcmVhdGVDYXJkUG9wdXBGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5kZWxldGVDb25maXJtUG9wdXBGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgb3Blbih7IHVybCwgdGl0bGUgfSkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwLWZvcm1fX2NhcHRpb25cIikudGV4dENvbnRlbnQgPVxuICAgICAgdGl0bGU7XG4gICAgdGhpcy5faW1nRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwLWZvcm1fX2ltYWdlXCIpO1xuICAgIHRoaXMuX2ltZ0VsZW1lbnQuc3JjID0gdXJsO1xuICAgIHRoaXMuX2ltZ0VsZW1lbnQuYWx0ID0gdGl0bGU7XG5cbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtjb250YWluZXJTZWxlY3Rvcn1gKTtcbiAgfVxuICAvLyBsb29wcyB0aHJvdWdoIGVhY2ggb2YgdGhlIGl0ZW1zIHRoYXQgd2VyZSBjYWxsZWQgaW4gYW5kIGNhbGxzIHRoZSByZW5kZXJlciBvbiB0aGF0IGl0ZW1cbiAgcmVuZGVySXRlbSgpIHtcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBkZXNjcmlwdGlvblNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9uYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke25hbWVTZWxlY3Rvcn1gKTtcbiAgICB0aGlzLl9kZXNjcmlwdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtkZXNjcmlwdGlvblNlbGVjdG9yfWApO1xuICB9XG4gIC8vcmV0dXJucyBhbiBvYmplY3Qgd2l0aCBpbmZvIGFib3V0IHRoZSB1c2VyXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLl9kZXNjcmlwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgfTtcbiAgfVxuICAvL3Rha2VzIG5ldyB1c2VyIGRhdGEgYW5kIGFkZHMgaXQgb24gdGhlIHBhZ2VcbiAgc2V0VXNlckluZm8oeyBuYW1lLCBkZXNjcmlwdGlvbiB9KSB7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX2Rlc2NyaXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCA9IGRlc2NyaXB0aW9uO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRGVsZXRlQ29uZmlybSBleHRlbmRzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcih7cG9wdXBTZWxlY3Rvcn0pIHtcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgfVxuICAgIFxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNjb25maXJtYXRpb24tYnV0dG9uXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmRlbGV0ZUNhcmQoKSk7XG4gICAgfVxuXG4gICAgZGVsZXRlQ2FyZCgpIHtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50XCIpLnJlbW92ZSgpO1xuICAgIH1cbn0iXSwibmFtZXMiOlsiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJwIiwiRm9ybVZhbGlkYXRvciIsImNvbnN0cnVjdG9yIiwiY29uZmlnIiwiZm9ybUVsZW1lbnQiLCJ0aGlzIiwiX2NvbmZpZyIsIl9mb3JtRWxlbWVudCIsImVuYWJsZVZhbGlkYXRpb24iLCJzZXRFdmVudExpc3RlbmVycyIsIl9pbnB1dHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdG4iLCJxdWVyeVNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJmb3JFYWNoIiwiaW5wdXQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZ0IiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl91cGRhdGVTdWJtaXRCdXR0b24iLCJoYXNFcnJvcnMiLCJfY2hlY2tGaWVsZHNWYWxpZGl0eSIsIl9zZXRTdWJtaXRCdXR0b25TdGF0ZSIsImRpc2FibGVkIiwiQXJyYXkiLCJmcm9tIiwic29tZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfcmVtb3ZlRXJyb3JTdHlsZXMiLCJfaGlkZUVycm9yTWVzc2FnZSIsIl9hZGRFcnJvclN0eWxlcyIsIl9zaG93RXJyb3JNZXNzYWdlIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiaW5wdXRIYXNFcnJvciIsImlkIiwiZXJyb3JUZXh0VmlzaWJsZSIsImFkZCIsImVycm9yTWVzc2FnZUVsZW1lbnQiLCJ0ZXh0Q29udGVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwicmVzZXRWYWxpZGF0aW9uIiwiQ2FyZCIsInRlbXBsYXRlU2VsZWN0b3IiLCJkYXRhIiwiaGFuZGxlQ2FyZENsaWNrIiwiX3RlbXBsYXRlIiwiZG9jdW1lbnQiLCJfZGF0YSIsIl9oYW5kbGVDYXJkQ2xpY2siLCJjcmVhdGVDYXJkIiwiX2NhcmQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwidGl0bGVFbGVtZW50IiwiaW1nRWxlbWVudCIsInNyYyIsInVybCIsImFsdCIsInRpdGxlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2RlbGV0ZUNhcmRDb25maXJtYXRpb24iLCJfdG9nZ2xlTGlrZSIsInRvZ2dsZSIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwib3BlbiIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImUiLCJrZXkiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfZm9ybSIsIl9mb3JtSW5wdXRzIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJfZm9ybVZhbHVlcyIsIm5hbWUiLCJ2YWx1ZSIsInByZXZlbnREZWZhdWx0IiwicmVzZXRGb3JtIiwicmVzZXQiLCJpbml0aWFsQ2FyZHMiLCJyZXF1aXJlIiwidmFsaWRhdGlvbkNvbmZpZyIsImZvcm1TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJlcnJvclRleHRTZWxlY3RvciIsImVkaXRQcm9maWxlQnV0dG9uIiwiYWRkQ2FyZEJ1dHRvbiIsImRlbGV0ZUNvbmZpcm1CdXR0b24iLCJpbnB1dE5hbWUiLCJpbnB1dEpvYiIsImltYWdlUG9wdXAiLCJfaW1nRWxlbWVudCIsImNhcmRMaXN0IiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW0iLCJpdGVtIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwidXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJkZXNjcmlwdGlvblNlbGVjdG9yIiwiX25hbWVFbGVtZW50IiwiX2Rlc2NyaXB0aW9uRWxlbWVudCIsImdldFVzZXJJbmZvIiwiZGVzY3JpcHRpb24iLCJzZXRVc2VySW5mbyIsImVkaXRQcm9maWxlUG9wdXBGb3JtIiwiY3JlYXRlQ2FyZFBvcHVwRm9ybSIsImRlbGV0ZUNvbmZpcm1Qb3B1cEZvcm0iLCJkZWxldGVDYXJkIiwiZWRpdFByb2ZpbGVWYWxpZGF0b3IiLCJjcmVhdGVDYXJkVmFsaWRhdG9yIl0sInNvdXJjZVJvb3QiOiIifQ==