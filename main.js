!function(){"use strict";var e={243:function(e,t,r){e.exports=r.p+"d3edfb3fe0284e46cb86.jpg"},769:function(e,t,r){e.exports=r.p+"05f1a4a8dccb609a7ff3.jpg"},199:function(e,t,r){e.exports=r.p+"4317d98e0be2323014f4.jpg"},408:function(e,t,r){e.exports=r.p+"c699805af844af80a2db.jpg"},462:function(e,t,r){e.exports=r.p+"0bbb8e918e3becd29120.jpg"},329:function(e,t,r){e.exports=r.p+"205114d203f083e3e22b.jpg"}},t={};function r(s){var o=t[s];if(void 0!==o)return o.exports;var i=t[s]={exports:{}};return e[s](i,i.exports,r),i.exports}r.p="",function(){class e{constructor(e,t){this._config=e,this._formElement=t}enableValidation(){this.setEventListeners()}setEventListeners(){this._inputs=this._formElement.querySelectorAll(this._config.inputSelector),this._submitBtn=this._formElement.querySelector(this._config.submitButtonSelector),this._inputs.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e,this._formElement),this._updateSubmitButton()}))}))}_updateSubmitButton(){const e=this._checkFieldsValidity(this._inputs);this._setSubmitButtonState(e)}_setSubmitButtonState(e){this._submitBtn.disabled=e}_checkFieldsValidity(){return Array.from(this._inputs).some((e=>!e.validity.valid))}_checkInputValidity(e){e.validity.valid?(this._removeErrorStyles(e),this._hideErrorMessage(e)):(this._addErrorStyles(e),this._showErrorMessage(e))}_removeErrorStyles(e){e.classList.remove(this._config.inputHasError)}_hideErrorMessage(e){this._formElement.querySelector(".".concat(e.id,"-error")).classList.remove(this._config.errorTextVisible)}_addErrorStyles(e){e.classList.add(this._config.inputHasError)}_showErrorMessage(e){const t=this._formElement.querySelector(".".concat(e.id,"-error"));t.textContent=e.validationMessage,t.classList.add(this._config.errorTextVisible)}resetValidation(){this._updateSubmitButton(),this._inputs.forEach((e=>{this._hideErrorMessage(e),this._removeErrorStyles(e)}))}}class t{constructor(e,t){let{data:r,handleCardClick:s}=e;this._template=document.querySelector("#".concat(t)),this._data=r,this._handleCardClick=s}createCard(){this._card=this._template.content.cloneNode(!0).querySelector(".element");const e=this._card.querySelector(".element__title"),t=this._card.querySelector(".element__image");return t.src=this._data.url,t.alt=this._data.title,e.textContent=this._data.title,this._setEventListeners(),this._card}_setEventListeners(){this._card.querySelector(".element__image").addEventListener("click",(e=>{this._handleCardClick(e)})),this._card.querySelector(".like-button").addEventListener("click",(()=>{this._toggleLike()}))}_toggleLike(){this._card.querySelector(".like-button").classList.toggle("like-button_active")}}class s{constructor(e){this._popupElement=document.querySelector("#".concat(e)),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("popup-form_open"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("popup-form_open"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popupElement.addEventListener("click",(e=>{(e.target===this._popupElement||e.target.classList.contains("close-button"))&&this.close()}))}}class o extends s{constructor(e){let{popupSelector:t,handleFormSubmit:r}=e;super(t),this._form=this._popupElement.querySelector(".popup-form__input-container"),this._formInputs=this._popupElement.querySelectorAll(".popup-form__input"),this._handleFormSubmit=r}_getInputValues(){return this._formValues={},this._formInputs.forEach((e=>{this._formValues[e.name]=e.value})),this._formValues}setEventListeners(){super.setEventListeners(),this._popupElement.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this.close()}))}resetForm(){this._form.reset()}}const i=[{title:"Palm Springs Aerial Tramway",url:r(199)},{title:"Cedar Point, OH",url:r(769)},{title:"N.A. Pow Wows",url:r(462)},{title:"Colonial Williamsburg",url:r(243)},{title:"Old San Juan, Puerto Rico",url:r(408)},{title:"Disney World",url:r(329)}],n={formSelector:".popup-form__input-container",inputSelector:".popup-form__input",submitButtonSelector:".submit-button",inactiveButtonClass:"popup-form__submit-button_type_disabled",errorTextSelector:".popup-form__error-text",inputHasError:"popup-form__input_has_error",errorTextVisible:"popup-form__error-text_visible"},l=(document.querySelector("#profile-pic-button"),document.querySelector("#edit-button")),c=document.querySelector(".add-button"),a=document.querySelector("#confirmation-button"),u=document.querySelector("#name"),p=document.querySelector("#description"),d=new class extends s{open(e){let{url:t,title:r}=e;this._popupElement.querySelector(".popup-form__caption").textContent=r,this._imgElement=this._popupElement.querySelector(".popup-form__image"),this._imgElement.src=t,this._imgElement.alt=r,super.open()}}("image-popup"),m=e=>new t({data:e,handleCardClick:()=>{d.open(e)}},"card-template").createCard(),_=new class{constructor(e,t){let{items:r,renderer:s}=e;this._items=r,this._renderer=s,this._container=document.querySelector(".".concat(t))}renderItem(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:i,renderer:e=>{_.addItem(m(e))}},"elements"),h=new class{constructor(e){let{nameSelector:t,descriptionSelector:r}=e;this._nameElement=document.querySelector(".".concat(t)),this._descriptionElement=document.querySelector(".".concat(r))}getUserInfo(){return{name:this._nameElement.textContent,description:this._descriptionElement.textContent}}setUserInfo(e){let{name:t,description:r}=e;this._nameElement.textContent=t,this._descriptionElement.textContent=r}}({nameSelector:"profile__name",descriptionSelector:"profile__description"}),E=new o({popupSelector:"edit-popup-form",handleFormSubmit:e=>{h.setUserInfo(e)}}),f=new o({popupSelector:"create-popup-form",handleFormSubmit:e=>{_.addItem(m(e)),f.resetForm()}}),S=new class extends s{constructor(e){let{popupSelector:t}=e;super(t)}setEventListeners(){super.setEventListeners(),this._popupElement.querySelector("#confirmation-button").addEventListener("click",this._deleteCard())}deleteCard(){document.querySelector(".element").remove()}}({popupSelector:"delete-confirmation-popup"}),b=new e(n,document.querySelector("#edit-popup-form"));b.enableValidation();const v=new e(n,document.querySelector("#create-popup-form"));v.enableValidation(),l.addEventListener("click",(()=>{E.open();const{name:e,description:t}=h.getUserInfo();u.value=e,p.value=t,b.resetValidation()})),c.addEventListener("click",(()=>{f.resetForm(),v.resetValidation(),f.open()})),a.addEventListener("click",(()=>{S.deleteCard()})),_.renderItem(i),d.setEventListeners(),E.setEventListeners(),f.setEventListeners(),S.setEventListeners()}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bEJxQyxFQUF5QixJSXJFaEIsY0FBcUM1RCxFQUNoRGhFLFlBQVksR0FBaUIsSUFBakIsY0FBQ2lFLEdBQWdCLEVBQ3pCYSxNQUFNYixHQUdWMUQsb0JBQ0l1RSxNQUFNdkUsb0JBQ05KLEtBQUsrRCxjQUFjdEQsY0FBYyx3QkFBd0JJLGlCQUFpQixRQUFTYixLQUFLMEgsZUFHNUZDLGFBQ0k5RSxTQUFTcEMsY0FBYyxZQUFZc0IsV0owRGUsQ0FDeEQrQixjQUFlLDhCQUdYOEQsRUFBdUIsSUFBSWhJLEVBQy9CNEYsRUFDQTNDLFNBQVNwQyxjQUFjLHFCQUV6Qm1ILEVBQXFCekgsbUJBRXJCLE1BQU0wSCxFQUFzQixJQUFJakksRUFDOUI0RixFQUNBM0MsU0FBU3BDLGNBQWMsdUJBRXpCb0gsRUFBb0IxSCxtQkFFcEJ5RixFQUFrQi9FLGlCQUFpQixTQUFTLEtBQzFDMEcsRUFBcUJyRCxPQUNyQixNQUFNLEtBQUNlLEVBQUQsWUFBT29DLEdBQWVOLEVBQVNLLGNBQ3JDckIsRUFBVWIsTUFBUUQsRUFDbEJlLEVBQVNkLE1BQVFtQyxFQUNqQk8sRUFBcUJyRixxQkFHdkJzRCxFQUFjaEYsaUJBQWlCLFNBQVMsS0FDdEMyRyxFQUFvQnBDLFlBQ3BCeUMsRUFBb0J0RixrQkFDcEJpRixFQUFvQnRELFVBR3RCNEIsRUFBb0JqRixpQkFBaUIsU0FBUyxLQUM1QzRHLEVBQXVCRSxnQkFJekJ4QixFQUFTTyxXQUFXcEIsR0FDcEJXLEVBQVc3RixvQkFDWG1ILEVBQXFCbkgsb0JBQ3JCb0gsRUFBb0JwSCxvQkFDcEJxSCxFQUF1QnJILG9CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80L3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3V0aWxzL0NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3BhZ2UvaW5kZXguanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRGVsZXRlQ29uZmlybS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjsiLCIvLyBGb3JtIFZhbGlkYXRpb24gY2xhc3MgY29kZVxuXG4vLyBcImNvbmZpZ1wiID0gYXJyYXkgb2Ygc2VsZWN0b3JzICYgXCJmb3JtRWxlbWVudFwiID0gZm9ybVxuZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIC8vIGFkZCBldmVudCBsaXN0ZW5lciBmdW5jdGlvbjogaXQgd2lsbCB1c2UgcGFyYW1ldGVycyBmb3JtIGFuZCBzZXR0aW5ncy5cbiAgLy8gc2VsZWN0IGFsbCBvZiB0aGUgaW5wdXRzXG4gIC8vLyB3YW50IHRvIHNlbGVjdCBzdWJtaXQgYnV0dG9uIGluIHRocyBmeCB0b29cbiAgLy8vIGFkZCBhIHBhcnQgdGhhdCBoYXMgYSBjb25kaXRpb24gd2hlcmUgdGhlcmUgaXMgYW4gZXJyb3IgYW5kIHdoYXQgdG8gZG8gdGhlblxuICAvLy8gYWRkIGJ1dHRvbiBkaXNhYmxlIHRvZ2dsZVxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbnB1dHMgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFxuICAgICAgdGhpcy5fY29uZmlnLmlucHV0U2VsZWN0b3JcbiAgICApO1xuICAgIHRoaXMuX3N1Ym1pdEJ0biA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB0aGlzLl9jb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3JcbiAgICApO1xuICAgIC8vY2hlY2tzIGluIHB1dCB2YWxpZGl0eSAmIGNoZWNrIGFsbCBpbnB1dHMgZm9yIHZhbGlkaXR5XG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGV2dCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQsIHRoaXMuX2Zvcm1FbGVtZW50KTtcbiAgICAgICAgdGhpcy5fdXBkYXRlU3VibWl0QnV0dG9uKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIF91cGRhdGVTdWJtaXRCdXR0b24oKSB7XG4gICAgY29uc3QgaGFzRXJyb3JzID0gdGhpcy5fY2hlY2tGaWVsZHNWYWxpZGl0eSh0aGlzLl9pbnB1dHMpO1xuICAgIHRoaXMuX3NldFN1Ym1pdEJ1dHRvblN0YXRlKGhhc0Vycm9ycyk7XG4gIH1cblxuICAvLyB0b2dnbGVzIHRoZSBidXR0b24gYmV0d2VlbiBkaXNhYmxlZCBhbmQgZW5hYmxlZFxuICBfc2V0U3VibWl0QnV0dG9uU3RhdGUoaGFzRXJyb3JzKSB7XG4gICAgdGhpcy5fc3VibWl0QnRuLmRpc2FibGVkID0gaGFzRXJyb3JzO1xuICB9XG5cbiAgLy8gdHVybiBpbnB1dHMgaW50byBhbiBhcnJheSwgdGFrZSBzb21lIGlucHV0OyByZXR1cm4gc29sdXRpb24gaWYgaW5wdXQgaXMgaW52YWxpZFxuICBfY2hlY2tGaWVsZHNWYWxpZGl0eSgpIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLl9pbnB1dHMpLnNvbWUoKGlucHV0KSA9PiAhaW5wdXQudmFsaWRpdHkudmFsaWQpO1xuICB9XG5cbiAgLy8gcmVtb3Zlcy9oaWRlcyBlcnJvcnMgaWYgaW5wdXRzIGFyZSB2YWxpZFxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0KSB7XG4gICAgaWYgKGlucHV0LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9yZW1vdmVFcnJvclN0eWxlcyhpbnB1dCk7XG4gICAgICB0aGlzLl9oaWRlRXJyb3JNZXNzYWdlKGlucHV0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fYWRkRXJyb3JTdHlsZXMoaW5wdXQpO1xuICAgICAgdGhpcy5fc2hvd0Vycm9yTWVzc2FnZShpbnB1dCk7XG4gICAgfVxuICB9XG5cbiAgX3JlbW92ZUVycm9yU3R5bGVzKGlucHV0KSB7XG4gICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5wdXRIYXNFcnJvcik7XG4gIH1cblxuICBfaGlkZUVycm9yTWVzc2FnZShpbnB1dCkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYC4ke2lucHV0LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuZXJyb3JUZXh0VmlzaWJsZSk7XG4gIH1cblxuICBfYWRkRXJyb3JTdHlsZXMoaW5wdXQpIHtcbiAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbnB1dEhhc0Vycm9yKTtcbiAgfVxuXG4gIF9zaG93RXJyb3JNZXNzYWdlKGlucHV0KSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgLiR7aW5wdXQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgZXJyb3JNZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0LnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuZXJyb3JUZXh0VmlzaWJsZSk7XG4gIH1cblxuICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fdXBkYXRlU3VibWl0QnV0dG9uKCk7XG5cbiAgICB0aGlzLl9pbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVFcnJvck1lc3NhZ2UoaW5wdXQpO1xuICAgICAgdGhpcy5fcmVtb3ZlRXJyb3JTdHlsZXMoaW5wdXQpO1xuICAgIH0pO1xuICB9XG59XG5cbi8vIHRvIGNoZWNrIHRvIHNlZSBpZiBzb21ldGhpbmcgaXMgYmVpbmcgZ3JhYmJlZCBjb3JyZWN0bHlcbi8vLyB2aWEgZGV2IHRvb2xzOiBpLmUuIHR5cGUgXCJpbnB1dC5pZFwiIHRvIHNlZSB3aGljaCBpbnB1dCBmdW5jdGlvbiBpcyBncmFiYmluZ1xuIiwiZXhwb3J0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3Rvcih7IGRhdGEsIGhhbmRsZUNhcmRDbGljayB9LCB0ZW1wbGF0ZVNlbGVjdG9yKSB7XG4gICAgdGhpcy5fdGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHt0ZW1wbGF0ZVNlbGVjdG9yfWApO1xuICAgIHRoaXMuX2RhdGEgPSBkYXRhO1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgfVxuXG4gIGNyZWF0ZUNhcmQoKSB7XG4gICAgdGhpcy5fY2FyZCA9IHRoaXMuX3RlbXBsYXRlLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudFwiKTtcbiAgIFxuICAgIGNvbnN0IHRpdGxlRWxlbWVudCA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X190aXRsZVwiKTtcbiAgICBjb25zdCBpbWdFbGVtZW50ID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2ltYWdlXCIpO1xuXG4gICAgaW1nRWxlbWVudC5zcmMgPSB0aGlzLl9kYXRhLnVybDtcbiAgICBpbWdFbGVtZW50LmFsdCA9IHRoaXMuX2RhdGEudGl0bGU7XG4gICAgdGl0bGVFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5fZGF0YS50aXRsZTtcblxuICAgIC8vIGNsaWNrIG9uIGltZyB0byBvcGVuIGltZyBtb2RhbCAoY2F1c2VzIGluaXRpYWwgY2FyZHMgbm90IHRvIHNob3cgdXApXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHJldHVybiB0aGlzLl9jYXJkO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkgeyAgXG4gICAgY29uc3QgaW1nRWxlbWVudCA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19pbWFnZVwiKTtcblxuICAgIGltZ0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChkYXRhKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2soZGF0YSk7XG4gICAgfSk7XG5cbiAgICAvL3RoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5kZWxldGUtYnV0dG9uXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAvL3RoaXMuX2RlbGV0ZUNhcmQoKTtcbiAgICAvL30pO1xuXG4gICAgLy8gbGlrZS91bmxpa2UgYnV0dG9uXG4gICAgdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmxpa2UtYnV0dG9uXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl90b2dnbGVMaWtlKCk7XG4gICAgfSk7XG4gIH1cblxuICBfdG9nZ2xlTGlrZSgpIHtcbiAgICB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIubGlrZS1idXR0b25cIikuY2xhc3NMaXN0LnRvZ2dsZShcImxpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgfVxuXG4gIC8vX2RlbGV0ZUNhcmQoKSB7XG4gICAgLy90aGlzLl9jYXJkLnJlbW92ZSgpO1xuICAvL31cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke3BvcHVwU2VsZWN0b3J9YCk7XG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwLWZvcm1fb3BlblwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwLWZvcm1fb3BlblwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UoZSkge1xuICAgIGlmIChlLmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIC8vIGlmIGNsaWNrIG91dHNpZGUgcG9wdXAgb3IgY2xpY2sgb24geCBidXR0b24sIGNsb3NlIHBvcHVwLlxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgIGlmIChlLnRhcmdldCA9PT0gdGhpcy5fcG9wdXBFbGVtZW50IHx8IGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImNsb3NlLWJ1dHRvblwiKSkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0IH0pIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXAtZm9ybV9faW5wdXQtY29udGFpbmVyXCIpO1xuICAgIHRoaXMuX2Zvcm1JbnB1dHMgPVxuICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXAtZm9ybV9faW5wdXRcIik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xuXG4gICAgdGhpcy5fZm9ybUlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWVzO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcbiAgfVxuXG4gIHJlc2V0Rm9ybSgpIHtcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XG4gIH1cbn1cbiIsIi8vbG9jYWwgaW1hZ2VzXG5jb25zdCBUcmFtd2F5ID0gcmVxdWlyZShcIi4uL2ltYWdlcy9QYWxtLVNwcmluZ3MtQWVyaWFsLVRyYW13YXktY29sb3JmaXguanBnXCIpO1xuY29uc3QgQ2VkYXJQdCA9IHJlcXVpcmUoXCIuLi9pbWFnZXMvQ29ya3NjcmV3XyhDZWRhcl9Qb2ludClfMDEuanBnXCIpO1xuY29uc3QgUG93V293ID0gcmVxdWlyZShcIi4uL2ltYWdlcy9qZXNzLWxpbmRuZXIteGVneURuMS1Tb1ktdW5zcGxhc2gtY29sb3JmaXguanBnXCIpO1xuY29uc3QgQ29sV2lsbGlhbXNidXJnID0gcmVxdWlyZShcIi4uL2ltYWdlcy9Db2xvbmlhbC1XaWxsaWFtc2J1cmctVmlyZ2luaWFzaXplZml4LTIuanBnXCIpO1xuY29uc3QgUHVlcnRvUmljbyA9IHJlcXVpcmUoXCIuLi9pbWFnZXMvamVubmlmZXItY2hlbi15WEppQzJVaklCby11bnNwbGFzaC1jb2xvcmZpeC5qcGdcIik7XG5jb25zdCBEaXNuZXlXb3JsZCA9IHJlcXVpcmUoXCIuLi9pbWFnZXMvc2FuZHJvLWdvbnphbGV6LWRCRUpHNmh2MjI0LXVuc3BsYXNoLmpwZ1wiKTtcblxuLy9sb29wIGZvciBpbml0aWFsIGNhcmRzXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgdGl0bGU6IFwiUGFsbSBTcHJpbmdzIEFlcmlhbCBUcmFtd2F5XCIsXG4gICAgdXJsOiBUcmFtd2F5LFxuICB9LFxuICB7XG4gICAgdGl0bGU6IFwiQ2VkYXIgUG9pbnQsIE9IXCIsXG4gICAgdXJsOiBDZWRhclB0LFxuICB9LFxuICB7XG4gICAgdGl0bGU6IFwiTi5BLiBQb3cgV293c1wiLFxuICAgIHVybDogUG93V293LFxuICB9LFxuICB7XG4gICAgdGl0bGU6IFwiQ29sb25pYWwgV2lsbGlhbXNidXJnXCIsXG4gICAgdXJsOiBDb2xXaWxsaWFtc2J1cmcsXG4gIH0sXG4gIHtcbiAgICB0aXRsZTogXCJPbGQgU2FuIEp1YW4sIFB1ZXJ0byBSaWNvXCIsXG4gICAgdXJsOiBQdWVydG9SaWNvLFxuICB9LFxuICB7XG4gICAgdGl0bGU6IFwiRGlzbmV5IFdvcmxkXCIsXG4gICAgdXJsOiBEaXNuZXlXb3JsZCxcbiAgfSxcbl07XG5cbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwLWZvcm1fX2lucHV0LWNvbnRhaW5lclwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cC1mb3JtX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIuc3VibWl0LWJ1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwLWZvcm1fX3N1Ym1pdC1idXR0b25fdHlwZV9kaXNhYmxlZFwiLFxuICBlcnJvclRleHRTZWxlY3RvcjogXCIucG9wdXAtZm9ybV9fZXJyb3ItdGV4dFwiLFxuICBpbnB1dEhhc0Vycm9yOiBcInBvcHVwLWZvcm1fX2lucHV0X2hhc19lcnJvclwiLFxuICBlcnJvclRleHRWaXNpYmxlOiBcInBvcHVwLWZvcm1fX2Vycm9yLXRleHRfdmlzaWJsZVwiLFxufTtcbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5cbmltcG9ydCB7IEZvcm1WYWxpZGF0b3IgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgeyBDYXJkIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhEZWxldGVDb25maXJtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aERlbGV0ZUNvbmZpcm0uanNcIjtcblxuaW1wb3J0IHtcbiAgaW5pdGlhbENhcmRzLFxuICB2YWxpZGF0aW9uQ29uZmlnLFxufSBmcm9tIFwiLi4vdXRpbHMvQ29uc3RhbnRzLmpzXCI7XG5cbi8vYnV0dG9uc1xuY29uc3QgZWRpdFByb2ZpbGVJbWdCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtcGljLWJ1dHRvblwiKTtcbmNvbnN0IGVkaXRQcm9maWxlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LWJ1dHRvblwiKTtcbmNvbnN0IGFkZENhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZC1idXR0b25cIik7XG5jb25zdCBkZWxldGVDb25maXJtQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjb25maXJtYXRpb24tYnV0dG9uXCIpO1xuXG4vL2lucHV0c1xuY29uc3QgaW5wdXROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNuYW1lXCIpO1xuY29uc3QgaW5wdXRKb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Rlc2NyaXB0aW9uXCIpO1xuXG5cbmNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCJpbWFnZS1wb3B1cFwiKTtcblxuY29uc3QgY3JlYXRlQ2FyZCA9IChkYXRhKSA9PiB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcbiAgICB7XG4gICAgICBkYXRhLFxuICAgICAgaGFuZGxlQ2FyZENsaWNrOiAoKSA9PiB7XG4gICAgICAgIGltYWdlUG9wdXAub3BlbihkYXRhKTtcbiAgICAgIH0sXG4gICAgfSxcbiAgICBcImNhcmQtdGVtcGxhdGVcIlxuICApO1xuICByZXR1cm4gY2FyZC5jcmVhdGVDYXJkKCk7XG59O1xuXG5jb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKFxuICB7XG4gICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcbiAgICByZW5kZXJlcjogKGRhdGEpID0+IHtcbiAgICAgIGNhcmRMaXN0LmFkZEl0ZW0oY3JlYXRlQ2FyZChkYXRhKSk7XG4gICAgfSxcbiAgfSxcbiAgXCJlbGVtZW50c1wiXG4pO1xuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIG5hbWVTZWxlY3RvcjogXCJwcm9maWxlX19uYW1lXCIsXG4gIGRlc2NyaXB0aW9uU2VsZWN0b3I6IFwicHJvZmlsZV9fZGVzY3JpcHRpb25cIixcbn0pO1xuXG5jb25zdCBlZGl0UHJvZmlsZVBvcHVwRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3RvcjogXCJlZGl0LXBvcHVwLWZvcm1cIixcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGRhdGEpID0+IHtcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyhkYXRhKTtcbiAgfSxcbn0pO1xuXG5jb25zdCBjcmVhdGVDYXJkUG9wdXBGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiBcImNyZWF0ZS1wb3B1cC1mb3JtXCIsXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChkYXRhKSA9PiB7XG4gICAgY2FyZExpc3QuYWRkSXRlbShjcmVhdGVDYXJkKGRhdGEpKTtcbiAgICBjcmVhdGVDYXJkUG9wdXBGb3JtLnJlc2V0Rm9ybSgpO1xuICB9LFxufSk7XG5cbmNvbnN0IGRlbGV0ZUNvbmZpcm1Qb3B1cEZvcm0gPSBuZXcgUG9wdXBXaXRoRGVsZXRlQ29uZmlybSh7XG4gIHBvcHVwU2VsZWN0b3I6IFwiZGVsZXRlLWNvbmZpcm1hdGlvbi1wb3B1cFwiLFxufSk7XG5cbmNvbnN0IGVkaXRQcm9maWxlVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXG4gIHZhbGlkYXRpb25Db25maWcsXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1wb3B1cC1mb3JtXCIpXG4pO1xuZWRpdFByb2ZpbGVWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBjcmVhdGVDYXJkVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXG4gIHZhbGlkYXRpb25Db25maWcsXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY3JlYXRlLXBvcHVwLWZvcm1cIilcbik7XG5jcmVhdGVDYXJkVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuZWRpdFByb2ZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgZWRpdFByb2ZpbGVQb3B1cEZvcm0ub3BlbigpO1xuICBjb25zdCB7bmFtZSwgZGVzY3JpcHRpb259ID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgaW5wdXROYW1lLnZhbHVlID0gbmFtZTtcbiAgaW5wdXRKb2IudmFsdWUgPSBkZXNjcmlwdGlvbjtcbiAgZWRpdFByb2ZpbGVWYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG59KTtcblxuYWRkQ2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjcmVhdGVDYXJkUG9wdXBGb3JtLnJlc2V0Rm9ybSgpO1xuICBjcmVhdGVDYXJkVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuICBjcmVhdGVDYXJkUG9wdXBGb3JtLm9wZW4oKTtcbn0pO1xuXG5kZWxldGVDb25maXJtQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGRlbGV0ZUNvbmZpcm1Qb3B1cEZvcm0uZGVsZXRlQ2FyZCgpO1xufSk7XG5cblxuY2FyZExpc3QucmVuZGVySXRlbShpbml0aWFsQ2FyZHMpO1xuaW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuZWRpdFByb2ZpbGVQb3B1cEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmNyZWF0ZUNhcmRQb3B1cEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmRlbGV0ZUNvbmZpcm1Qb3B1cEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTsiLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBvcGVuKHsgdXJsLCB0aXRsZSB9KSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXAtZm9ybV9fY2FwdGlvblwiKS50ZXh0Q29udGVudCA9XG4gICAgICB0aXRsZTtcbiAgICB0aGlzLl9pbWdFbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXAtZm9ybV9faW1hZ2VcIik7XG4gICAgdGhpcy5faW1nRWxlbWVudC5zcmMgPSB1cmw7XG4gICAgdGhpcy5faW1nRWxlbWVudC5hbHQgPSB0aXRsZTtcblxuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2NvbnRhaW5lclNlbGVjdG9yfWApO1xuICB9XG4gIC8vIGxvb3BzIHRocm91Z2ggZWFjaCBvZiB0aGUgaXRlbXMgdGhhdCB3ZXJlIGNhbGxlZCBpbiBhbmQgY2FsbHMgdGhlIHJlbmRlcmVyIG9uIHRoYXQgaXRlbVxuICByZW5kZXJJdGVtKCkge1xuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGRlc2NyaXB0aW9uU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX25hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7bmFtZVNlbGVjdG9yfWApO1xuICAgIHRoaXMuX2Rlc2NyaXB0aW9uRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2Rlc2NyaXB0aW9uU2VsZWN0b3J9YCk7XG4gIH1cbiAgLy9yZXR1cm5zIGFuIG9iamVjdCB3aXRoIGluZm8gYWJvdXQgdGhlIHVzZXJcbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50LFxuICAgICAgZGVzY3JpcHRpb246IHRoaXMuX2Rlc2NyaXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICB9O1xuICB9XG4gIC8vdGFrZXMgbmV3IHVzZXIgZGF0YSBhbmQgYWRkcyBpdCBvbiB0aGUgcGFnZVxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGRlc2NyaXB0aW9uIH0pIHtcbiAgICB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5fZGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gZGVzY3JpcHRpb247XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhEZWxldGVDb25maXJtIGV4dGVuZHMgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHtwb3B1cFNlbGVjdG9yfSkge1xuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB9XG4gICAgXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI2NvbmZpcm1hdGlvbi1idXR0b25cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2RlbGV0ZUNhcmQoKSk7XG4gICAgfVxuXG4gICAgZGVsZXRlQ2FyZCgpIHtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50XCIpLnJlbW92ZSgpO1xuICAgIH1cbn0iXSwibmFtZXMiOlsiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJwIiwiRm9ybVZhbGlkYXRvciIsImNvbnN0cnVjdG9yIiwiY29uZmlnIiwiZm9ybUVsZW1lbnQiLCJ0aGlzIiwiX2NvbmZpZyIsIl9mb3JtRWxlbWVudCIsImVuYWJsZVZhbGlkYXRpb24iLCJzZXRFdmVudExpc3RlbmVycyIsIl9pbnB1dHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdG4iLCJxdWVyeVNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJmb3JFYWNoIiwiaW5wdXQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZ0IiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl91cGRhdGVTdWJtaXRCdXR0b24iLCJoYXNFcnJvcnMiLCJfY2hlY2tGaWVsZHNWYWxpZGl0eSIsIl9zZXRTdWJtaXRCdXR0b25TdGF0ZSIsImRpc2FibGVkIiwiQXJyYXkiLCJmcm9tIiwic29tZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfcmVtb3ZlRXJyb3JTdHlsZXMiLCJfaGlkZUVycm9yTWVzc2FnZSIsIl9hZGRFcnJvclN0eWxlcyIsIl9zaG93RXJyb3JNZXNzYWdlIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiaW5wdXRIYXNFcnJvciIsImlkIiwiZXJyb3JUZXh0VmlzaWJsZSIsImFkZCIsImVycm9yTWVzc2FnZUVsZW1lbnQiLCJ0ZXh0Q29udGVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwicmVzZXRWYWxpZGF0aW9uIiwiQ2FyZCIsInRlbXBsYXRlU2VsZWN0b3IiLCJkYXRhIiwiaGFuZGxlQ2FyZENsaWNrIiwiX3RlbXBsYXRlIiwiZG9jdW1lbnQiLCJfZGF0YSIsIl9oYW5kbGVDYXJkQ2xpY2siLCJjcmVhdGVDYXJkIiwiX2NhcmQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwidGl0bGVFbGVtZW50IiwiaW1nRWxlbWVudCIsInNyYyIsInVybCIsImFsdCIsInRpdGxlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX3RvZ2dsZUxpa2UiLCJ0b2dnbGUiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIm9wZW4iLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJlIiwia2V5IiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX2Zvcm0iLCJfZm9ybUlucHV0cyIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2dldElucHV0VmFsdWVzIiwiX2Zvcm1WYWx1ZXMiLCJuYW1lIiwidmFsdWUiLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0Rm9ybSIsInJlc2V0IiwiaW5pdGlhbENhcmRzIiwicmVxdWlyZSIsInZhbGlkYXRpb25Db25maWciLCJmb3JtU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiZXJyb3JUZXh0U2VsZWN0b3IiLCJlZGl0UHJvZmlsZUJ1dHRvbiIsImFkZENhcmRCdXR0b24iLCJkZWxldGVDb25maXJtQnV0dG9uIiwiaW5wdXROYW1lIiwiaW5wdXRKb2IiLCJpbWFnZVBvcHVwIiwiX2ltZ0VsZW1lbnQiLCJjYXJkTGlzdCIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtIiwiaXRlbSIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsInVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiZGVzY3JpcHRpb25TZWxlY3RvciIsIl9uYW1lRWxlbWVudCIsIl9kZXNjcmlwdGlvbkVsZW1lbnQiLCJnZXRVc2VySW5mbyIsImRlc2NyaXB0aW9uIiwic2V0VXNlckluZm8iLCJlZGl0UHJvZmlsZVBvcHVwRm9ybSIsImNyZWF0ZUNhcmRQb3B1cEZvcm0iLCJkZWxldGVDb25maXJtUG9wdXBGb3JtIiwiX2RlbGV0ZUNhcmQiLCJkZWxldGVDYXJkIiwiZWRpdFByb2ZpbGVWYWxpZGF0b3IiLCJjcmVhdGVDYXJkVmFsaWRhdG9yIl0sInNvdXJjZVJvb3QiOiIifQ==